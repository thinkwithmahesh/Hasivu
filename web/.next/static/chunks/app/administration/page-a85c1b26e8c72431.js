(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2542],{42629:function(e,s,t){Promise.resolve().then(t.bind(t,3313))},3313:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return U}});var a,n,i,r,l,c,o=t(45610),d=t(41369),m=t(43654),x=t(97142),u=t(50044),h=t(57437),f=t(2265),g=t(16357),j=t(93378),p=t(99605),v=t(19690),b=t(52385),N=t(42812),y=t(26755);(a=r||(r={})).KITCHEN_DOWN="kitchen_down",a.BUDGET_EXCEEDED="budget_exceeded",a.QUALITY_ISSUE="quality_issue",a.PAYMENT_FAILED="payment_failed",a.SYSTEM_ERROR="system_error",a.SECURITY_ALERT="security_alert",(n=l||(l={})).LOW="low",n.MEDIUM="medium",n.HIGH="high",n.CRITICAL="critical",n.URGENT="urgent",(i=c||(c={})).SCHOOL="school",i.ZONE="zone",i.DISTRICT="district",i.STATE="state";var w=t(85790),T=t(90998),S=t(29409),D=t(4631),C=t(98253),E=t(25750),A=t(41298),_=t(49036),I=t(66654),O=t(3021),R=t(74530),Z={schools:{total:1247,active:1205,inactive:42,newThisMonth:28,byTier:{BASIC:523,STANDARD:456,PREMIUM:189,ENTERPRISE:37},byState:{Karnataka:287,"Tamil Nadu":234,"Andhra Pradesh":198,Kerala:156,Others:372},performanceDistribution:{excellent:312,good:578,average:289,poor:68}},operations:{todayOrders:24567,activeKitchens:1189,studentsServed:156789,mealsDelivered:23890,averageDeliveryTime:18.5,qualityScore:94.2,incidentsReported:3,emergencyAlerts:0},financial:{totalRevenue:2458967,totalCosts:1967523,profitMargin:19.97,outstandingPayments:125678,budgetUtilization:87.3,costPerMeal:82.5,revenueGrowth:12.8,paymentSuccessRate:97.8},compliance:{overallScore:96.2,safetyCompliance:98.1,nutritionalCompliance:95.7,regulatoryCompliance:94.8,auditsPending:12,violationsReported:2,correctiveActions:8,certificationStatus:99.2},performance:{averageRating:4.6,customerSatisfaction:92.4,operationalEfficiency:89.7,staffProductivity:87.3,resourceUtilization:91.2,innovationIndex:78.9,sustainabilityScore:85.6,technologyAdoption:94.1},alerts:[{id:"1",type:r.KITCHEN_DOWN,severity:l.HIGH,title:"Kitchen Offline",message:"Kitchen at Bangalore Public School has been offline for 45 minutes",source:{type:"kitchen",id:"k-001",name:"BPS Kitchen Unit 1"},status:"open",createdAt:new Date(Date.now()-27e5),updatedAt:new Date(Date.now()-27e5)},{id:"2",type:r.BUDGET_EXCEEDED,severity:l.MEDIUM,title:"Budget Alert",message:"Monthly budget exceeded by 5% in Chennai District",source:{type:"school",id:"s-002",name:"Chennai District"},status:"in_progress",assignedTo:"district-officer-chennai",createdAt:new Date(Date.now()-72e5),updatedAt:new Date(Date.now()-18e5)},{id:"3",type:r.QUALITY_ISSUE,severity:l.LOW,title:"Quality Score Drop",message:"Quality score decreased to 88% at Mysore Zone schools",source:{type:"school",id:"s-003",name:"Mysore Zone"},status:"open",createdAt:new Date(Date.now()-144e5),updatedAt:new Date(Date.now()-144e5)}],timestamp:new Date},M=function(e){switch(e){case l.CRITICAL:return"bg-red-100 text-red-800 border-red-200";case l.HIGH:return"bg-orange-100 text-orange-800 border-orange-200";case l.MEDIUM:return"bg-yellow-100 text-yellow-800 border-yellow-200";case l.LOW:return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},L=function(e){var s=e.title,t=e.value,a=e.subtitle,n=e.icon,i=e.trend,r=e.color;return(0,h.jsx)(g.Zb,{className:"hover:shadow-lg transition-shadow",children:(0,h.jsx)(g.aY,{className:"p-6",children:(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:s}),(0,h.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:t}),a&&(0,h.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:a}),void 0!==i&&(0,h.jsxs)("div",{className:"flex items-center mt-2 text-sm ".concat(i>=0?"text-green-600":"text-red-600"),children:[(0,h.jsx)(w.Z,{className:"w-4 h-4 mr-1"}),i>=0?"+":"",i,"%"]})]}),(0,h.jsx)("div",{className:"p-3 rounded-full bg-gray-50 ".concat(void 0===r?"text-blue-600":r),children:(0,h.jsx)(n,{className:"w-6 h-6"})})]})})})};function U(){var e,s,t=(0,y.useAuth)().user,a=(0,x._)((0,f.useState)(Z),2),n=a[0],i=a[1],r=(0,x._)((0,f.useState)("overview"),2),l=r[0],w=r[1],U=(0,x._)((0,f.useState)(!1),2),Y=U[0],P=U[1],k=(e=(0,o._)(function(){return(0,u.Jh)(this,function(e){return P(!0),setTimeout(function(){i((0,m._)((0,d._)({},Z),{timestamp:new Date})),P(!1)},1e3),[2]})}),function(){return e.apply(this,arguments)}),H=function(e){return new Intl.NumberFormat("en-IN").format(e)};return(0,h.jsx)(b.i1,{requireAuth:!0,allowedRoles:[N.i4.ADMIN,N.i4.SCHOOL_ADMIN],children:(0,h.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,h.jsx)("div",{className:"bg-white border-b",children:(0,h.jsx)("div",{className:"px-6 py-4",children:(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"HASIVU Administration Center"}),(0,h.jsx)("p",{className:"text-gray-600 mt-1",children:"Centralized multi-school nutrition program management"})]}),(0,h.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,h.jsxs)(p.C,{variant:"outline",className:"px-3 py-1",children:[((null==t?void 0:t.role)==="super_admin"?c.STATE:(null==t?void 0:t.role)==="district_admin"?c.DISTRICT:(null==t?void 0:t.role)==="zone_admin"?c.ZONE:c.SCHOOL).toUpperCase()," LEVEL"]}),(0,h.jsxs)(j.Button,{variant:"outline",onClick:k,disabled:Y,className:"flex items-center space-x-2",children:[(0,h.jsx)(T.Z,{className:"w-4 h-4 ".concat(Y?"animate-spin":"")}),(0,h.jsx)("span",{children:"Refresh"})]}),(0,h.jsxs)(j.Button,{className:"flex items-center space-x-2",children:[(0,h.jsx)(S.Z,{className:"w-4 h-4"}),(0,h.jsx)("span",{children:"Settings"})]})]})]})})}),(0,h.jsx)("div",{className:"p-6",children:(0,h.jsxs)(v.Tabs,{value:l,onValueChange:w,children:[(0,h.jsxs)(v.TabsList,{className:"grid w-full grid-cols-5",children:[(0,h.jsx)(v.TabsTrigger,{value:"overview",children:"Overview"}),(0,h.jsx)(v.TabsTrigger,{value:"schools",children:"Schools"}),(0,h.jsx)(v.TabsTrigger,{value:"operations",children:"Operations"}),(0,h.jsx)(v.TabsTrigger,{value:"financials",children:"Financials"}),(0,h.jsx)(v.TabsTrigger,{value:"compliance",children:"Compliance"})]}),(0,h.jsxs)(v.TabsContent,{value:"overview",className:"space-y-6",children:[n.alerts.length>0&&(0,h.jsx)(g.Zb,{className:"border-orange-200 bg-orange-50",children:(0,h.jsx)(g.aY,{className:"p-4",children:(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,h.jsx)(D.Z,{className:"w-5 h-5 text-orange-600"}),(0,h.jsxs)("div",{children:[(0,h.jsxs)("h3",{className:"font-medium text-orange-900",children:[n.alerts.length," Active Alert",1!==n.alerts.length?"s":""]}),(0,h.jsx)("p",{className:"text-sm text-orange-700",children:"Requires immediate attention"})]})]}),(0,h.jsx)(j.Button,{variant:"outline",size:"sm",children:"View All Alerts"})]})})}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,h.jsx)(L,{title:"Total Schools",value:H(n.schools.total),subtitle:"".concat(n.schools.active," active"),icon:C.Z,trend:2.3,color:"text-blue-600"}),(0,h.jsx)(L,{title:"Students Served Today",value:H(n.operations.studentsServed),subtitle:"".concat(H(n.operations.todayOrders)," orders"),icon:E.Z,trend:8.1,color:"text-green-600"}),(0,h.jsx)(L,{title:"Monthly Revenue",value:(s=n.financial.totalRevenue,new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(s)),subtitle:"".concat(n.financial.revenueGrowth,"% growth"),icon:A.Z,trend:n.financial.revenueGrowth,color:"text-emerald-600"}),(0,h.jsx)(L,{title:"Compliance Score",value:"".concat(n.compliance.overallScore,"%"),subtitle:"All categories",icon:_.Z,trend:1.2,color:"text-purple-600"})]}),(0,h.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,h.jsxs)(g.Zb,{children:[(0,h.jsx)(g.Ol,{children:(0,h.jsxs)(g.ll,{className:"flex items-center space-x-2",children:[(0,h.jsx)(I.Z,{className:"w-5 h-5"}),(0,h.jsx)("span",{children:"Performance Overview"})]})}),(0,h.jsx)(g.aY,{children:(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsx)("span",{className:"text-sm font-medium",children:"Customer Satisfaction"}),(0,h.jsxs)("span",{className:"text-sm text-gray-600",children:[n.performance.customerSatisfaction,"%"]})]}),(0,h.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,h.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"".concat(n.performance.customerSatisfaction,"%")}})}),(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsx)("span",{className:"text-sm font-medium",children:"Operational Efficiency"}),(0,h.jsxs)("span",{className:"text-sm text-gray-600",children:[n.performance.operationalEfficiency,"%"]})]}),(0,h.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,h.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(n.performance.operationalEfficiency,"%")}})}),(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsx)("span",{className:"text-sm font-medium",children:"Technology Adoption"}),(0,h.jsxs)("span",{className:"text-sm text-gray-600",children:[n.performance.technologyAdoption,"%"]})]}),(0,h.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,h.jsx)("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:"".concat(n.performance.technologyAdoption,"%")}})})]})})]}),(0,h.jsxs)(g.Zb,{children:[(0,h.jsx)(g.Ol,{children:(0,h.jsxs)(g.ll,{className:"flex items-center space-x-2",children:[(0,h.jsx)(O.Z,{className:"w-5 h-5"}),(0,h.jsx)("span",{children:"Recent Alerts"})]})}),(0,h.jsx)(g.aY,{children:(0,h.jsxs)("div",{className:"space-y-3",children:[n.alerts.slice(0,3).map(function(e){return(0,h.jsxs)("div",{className:"flex items-start space-x-3 p-3 rounded-lg border",children:[(0,h.jsx)(p.C,{variant:"outline",className:M(e.severity),children:e.severity}),(0,h.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,h.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.title}),(0,h.jsx)("p",{className:"text-sm text-gray-600 truncate",children:e.message}),(0,h.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[e.source.name," • ",new Date(e.createdAt).toLocaleTimeString()]})]})]},e.id)}),0===n.alerts.length&&(0,h.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,h.jsx)(R.Z,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),(0,h.jsx)("p",{children:"No active alerts"})]})]})})]})]}),(0,h.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,h.jsxs)(g.Zb,{children:[(0,h.jsx)(g.Ol,{children:(0,h.jsx)(g.ll,{children:"Schools by Performance"})}),(0,h.jsx)(g.aY,{children:(0,h.jsxs)("div",{className:"space-y-3",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded"}),(0,h.jsxs)("span",{className:"text-sm",children:["Excellent (",">","90%)"]})]}),(0,h.jsx)("span",{className:"text-sm font-medium",children:n.schools.performanceDistribution.excellent})]}),(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded"}),(0,h.jsx)("span",{className:"text-sm",children:"Good (70-90%)"})]}),(0,h.jsx)("span",{className:"text-sm font-medium",children:n.schools.performanceDistribution.good})]}),(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)("div",{className:"w-3 h-3 bg-yellow-500 rounded"}),(0,h.jsx)("span",{className:"text-sm",children:"Average (50-70%)"})]}),(0,h.jsx)("span",{className:"text-sm font-medium",children:n.schools.performanceDistribution.average})]}),(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,h.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded"}),(0,h.jsxs)("span",{className:"text-sm",children:["Needs Improvement (","<","50%)"]})]}),(0,h.jsx)("span",{className:"text-sm font-medium",children:n.schools.performanceDistribution.poor})]})]})})]}),(0,h.jsxs)(g.Zb,{children:[(0,h.jsx)(g.Ol,{children:(0,h.jsx)(g.ll,{children:"Geographic Distribution"})}),(0,h.jsx)(g.aY,{children:(0,h.jsx)("div",{className:"space-y-3",children:Object.entries(n.schools.byState).map(function(e){var s=(0,x._)(e,2),t=s[0],a=s[1];return(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsx)("span",{className:"text-sm",children:t}),(0,h.jsxs)("span",{className:"text-sm font-medium",children:[a," schools"]})]},t)})})})]})]})]}),(0,h.jsx)(v.TabsContent,{value:"schools",children:(0,h.jsxs)(g.Zb,{children:[(0,h.jsx)(g.Ol,{children:(0,h.jsx)(g.ll,{children:"Schools Management"})}),(0,h.jsx)(g.aY,{children:(0,h.jsx)("p",{className:"text-gray-600",children:"School management interface will be implemented here."})})]})}),(0,h.jsx)(v.TabsContent,{value:"operations",children:(0,h.jsxs)(g.Zb,{children:[(0,h.jsx)(g.Ol,{children:(0,h.jsx)(g.ll,{children:"Operations Dashboard"})}),(0,h.jsx)(g.aY,{children:(0,h.jsx)("p",{className:"text-gray-600",children:"Operations monitoring interface will be implemented here."})})]})}),(0,h.jsx)(v.TabsContent,{value:"financials",children:(0,h.jsxs)(g.Zb,{children:[(0,h.jsx)(g.Ol,{children:(0,h.jsx)(g.ll,{children:"Financial Management"})}),(0,h.jsx)(g.aY,{children:(0,h.jsx)("p",{className:"text-gray-600",children:"Financial management interface will be implemented here."})})]})}),(0,h.jsx)(v.TabsContent,{value:"compliance",children:(0,h.jsxs)(g.Zb,{children:[(0,h.jsx)(g.Ol,{children:(0,h.jsx)(g.ll,{children:"Compliance & Audit"})}),(0,h.jsx)(g.aY,{children:(0,h.jsx)("p",{className:"text-gray-600",children:"Compliance monitoring interface will be implemented here."})})]})})]})})]})})}},99605:function(e,s,t){"use strict";t.d(s,{C:function(){return o}});var a=t(41369),n=t(75104),i=t(57437);t(2265);var r=t(96061),l=t(22703),c=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){var s=e.className,t=e.variant,r=(0,n._)(e,["className","variant"]);return(0,i.jsx)("div",(0,a._)({className:(0,l.cn)(c({variant:t}),s)},r))}},19690:function(e,s,t){"use strict";t.r(s),t.d(s,{Tabs:function(){return o},TabsContent:function(){return x},TabsList:function(){return d},TabsTrigger:function(){return m}});var a=t(41369),n=t(75104),i=t(57437),r=t(2265),l=t(88140),c=t(22703),o=l.fC,d=r.forwardRef(function(e,s){var t=e.className,r=(0,n._)(e,["className"]);return(0,i.jsx)(l.aV,(0,a._)({ref:s,className:(0,c.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t)},r))});d.displayName=l.aV.displayName;var m=r.forwardRef(function(e,s){var t=e.className,r=(0,n._)(e,["className"]);return(0,i.jsx)(l.xz,(0,a._)({ref:s,className:(0,c.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t)},r))});m.displayName=l.xz.displayName;var x=r.forwardRef(function(e,s){var t=e.className,r=(0,n._)(e,["className"]);return(0,i.jsx)(l.VY,(0,a._)({ref:s,className:(0,c.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t)},r))});x.displayName=l.VY.displayName}},function(e){e.O(0,[7895,7554,8140,9197,6430,6755,2385,2971,596,1744],function(){return e(e.s=42629)}),_N_E=e.O()}]);