(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3185],{6374:function(e,t,r){Promise.resolve().then(r.bind(r,40114)),Promise.resolve().then(r.bind(r,86227)),Promise.resolve().then(r.bind(r,12228)),Promise.resolve().then(r.bind(r,77438)),Promise.resolve().then(r.bind(r,28386)),Promise.resolve().then(r.bind(r,26755)),Promise.resolve().then(r.t.bind(r,18788,23)),Promise.resolve().then(r.t.bind(r,62471,23))},28386:function(e,t,r){"use strict";r.r(t),r.d(t,{AccessibilityProvider:function(){return c},useAccessibility:function(){return l}});var n=r(97142),a=r(91005),s=r(57437),i=r(2265),o=r(24033),u=r(7564),d=(0,i.createContext)(void 0);function c(e){var t=e.children,r=(0,n._)((0,i.useState)([]),2),c=r[0],l=r[1],f=(0,n._)((0,i.useState)(""),2),h=f[0],g=f[1],m=(0,n._)((0,i.useState)(null),2),p=(m[0],m[1]),v=(0,n._)((0,i.useState)(!1),2),y=v[0],b=v[1],k=(0,n._)((0,i.useState)(!1),2),x=k[0],L=k[1],C=(0,n._)((0,i.useState)("medium"),2),w=C[0],S=C[1];(0,o.useRouter)();var E=(0,o.usePathname)();(0,i.useEffect)(function(){var e=window.matchMedia("(prefers-reduced-motion: reduce)");b(e.matches);var t=function(e){b(e.matches)};e.addEventListener("change",t);var r=window.matchMedia("(prefers-contrast: high)");L(r.matches);var n=function(e){L(e.matches)};r.addEventListener("change",n);var a=localStorage.getItem("hasivu-font-size");return a&&(S(a),document.documentElement.classList.remove("text-sm","text-base","text-lg"),document.documentElement.classList.add("small"===a?"text-sm":"large"===a?"text-lg":"text-base")),function(){e.removeEventListener("change",t),r.removeEventListener("change",n)}},[]),(0,i.useEffect)(function(){localStorage.setItem("hasivu-font-size",w),document.documentElement.classList.remove("text-sm","text-base","text-lg"),document.documentElement.classList.add("small"===w?"text-sm":"large"===w?"text-lg":"text-base")},[w]),(0,i.useEffect)(function(){var e={"/":"Home","/menu":"Menu","/dashboard":"Dashboard","/dashboard/admin":"Administrator Dashboard","/dashboard/teacher":"Teacher Dashboard","/dashboard/parent":"Parent Dashboard","/dashboard/student":"Student Dashboard","/orders":"Order Management","/profile":"Profile","/settings":"Settings","/auth/login":"Login","/auth/register":"Registration"}[E]||"Page: ".concat(E.split("/").pop()||"Unknown");e&&P(e)},[E]),(0,i.useEffect)(function(){var e=function(e){if(e.altKey&&"m"===e.key.toLowerCase()){e.preventDefault();var t=document.getElementById("main-content");t&&(t.focus(),t.scrollIntoView({behavior:"smooth"}),j("Navigated to main content","polite"))}if(e.altKey&&"n"===e.key.toLowerCase()){e.preventDefault();var r=document.querySelector("nav")||document.querySelector('[role="navigation"]');if(r){var n=r.querySelector('a, button, [tabindex]:not([tabindex="-1"])');n&&(n.focus(),n.scrollIntoView({behavior:"smooth"}),j("Navigated to main navigation","polite"))}}e.altKey&&"="===e.key&&(e.preventDefault(),"small"===w?S("medium"):"medium"===w&&S("large"),j("Font size: ".concat("small"===w?"medium":"large"),"polite")),e.altKey&&"-"===e.key&&(e.preventDefault(),"large"===w?S("medium"):"medium"===w&&S("small"),j("Font size: ".concat("large"===w?"medium":"small"),"polite"))};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}},[w]);var j=(0,i.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"polite",r=Date.now().toString();l(function(n){return(0,a._)(n).concat([{id:r,message:e,priority:t}])}),setTimeout(function(){l(function(e){return e.filter(function(e){return e.id!==r})})},5e3)},[]),P=(0,i.useCallback)(function(e){g("Page changed to: ".concat(e)),setTimeout(function(){g("")},3e3)},[]);return(0,s.jsxs)(d.Provider,{value:{announceMessage:j,announcePageChange:P,setFocusedElement:p,isReducedMotion:y,isHighContrast:x,fontSize:w,setFontSize:function(e){S(e),j("Font size changed to ".concat(e),"polite")}},children:[t,c.map(function(e){return(0,s.jsx)(u.LE,{politeness:e.priority,children:e.message},e.id)}),h&&(0,s.jsx)(u.Am,{message:h,type:"status"}),(0,s.jsxs)("div",{className:"sr-only",children:[(0,s.jsx)("p",{children:"Keyboard shortcuts available:"}),(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{children:"Alt + M: Skip to main content"}),(0,s.jsx)("li",{children:"Alt + N: Skip to navigation"}),(0,s.jsx)("li",{children:"Alt + Plus: Increase font size"}),(0,s.jsx)("li",{children:"Alt + Minus: Decrease font size"})]})]})]})}function l(){var e=(0,i.useContext)(d);if(void 0===e)throw Error("useAccessibility must be used within an AccessibilityProvider");return e}t.default=c},77438:function(e,t,r){"use strict";r.r(t),r.d(t,{ReduxProvider:function(){return ee}});var n,a,s,i,o,u,d,c=r(57437),l=r(8587),f=r(53837),h=r(80263),g=r(50663),m=r(81267),p=r(11850),v=r(45610),y=r(41369),b=r(50044),k=r(42588),x=(0,g.hg)("auth/loginUser",(n=(0,v._)(function(e,t){var r,n,a,s,i;return(0,b.Jh)(this,function(o){switch(o.label){case 0:r=t.rejectWithValue,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,k.ZP.login(e)];case 2:if((n=o.sent()).success&&n.user)return[2,{user:n.user,token:(null===(a=n.tokens)||void 0===a?void 0:a.accessToken)||null,refreshToken:(null===(s=n.tokens)||void 0===s?void 0:s.refreshToken)||null,message:n.message}];return[2,r(n.error||"Login failed")];case 3:return[2,r((i=o.sent())instanceof Error?i.message:"Login failed")];case 4:return[2]}})}),function(e,t){return n.apply(this,arguments)})),L=(0,g.hg)("auth/refreshToken",(a=(0,v._)(function(e,t){var r,n,a;return(0,b.Jh)(this,function(e){switch(e.label){case 0:r=t.rejectWithValue,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,k.ZP.refreshToken()];case 2:if((n=e.sent()).success)return[2,{token:n.accessToken,refreshToken:n.refreshToken}];return[2,r(n.message||"Token refresh failed")];case 3:return[2,r((a=e.sent())instanceof Error?a.message:"Token refresh failed")];case 4:return[2]}})}),function(e,t){return a.apply(this,arguments)})),C=(0,g.hg)("auth/logoutUser",(s=(0,v._)(function(e,t){return(0,b.Jh)(this,function(e){switch(e.label){case 0:t.rejectWithValue,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,k.ZP.logout()];case 2:case 3:return e.sent(),[2,!0];case 4:return[2]}})}),function(e,t){return s.apply(this,arguments)})),w=(0,g.hg)("auth/getCurrentUser",(i=(0,v._)(function(e,t){var r,n,a,s;return(0,b.Jh)(this,function(e){switch(e.label){case 0:r=t.rejectWithValue,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,k.ZP.getCurrentUser()];case 2:if((a=e.sent()).success&&(null===(n=a.data)||void 0===n?void 0:n.user))return[2,a.data.user];return[2,r(a.error||"Failed to get current user")];case 3:return[2,r((s=e.sent())instanceof Error?s.message:"Failed to get current user")];case 4:return[2]}})}),function(e,t){return i.apply(this,arguments)})),S={user:null,token:null,refreshToken:null,isAuthenticated:!1,isLoading:!1,error:null,lastActivity:Date.now()},E=(0,g.oM)({name:"auth",initialState:S,reducers:{clearError:function(e){e.error=null},updateLastActivity:function(e){e.lastActivity=Date.now()},updateUserProfile:function(e,t){e.user&&(e.user=(0,y._)({},e.user,t.payload))},clearAuth:function(e){e.user=null,e.token=null,e.refreshToken=null,e.isAuthenticated=!1,e.error=null,e.lastActivity=Date.now()},setLoading:function(e,t){e.isLoading=t.payload}},extraReducers:function(e){e.addCase(x.pending,function(e){e.isLoading=!0,e.error=null}).addCase(x.fulfilled,function(e,t){e.isLoading=!1,e.user=t.payload.user,e.token=t.payload.token,e.refreshToken=t.payload.refreshToken,e.isAuthenticated=!0,e.error=null,e.lastActivity=Date.now()}).addCase(x.rejected,function(e,t){e.isLoading=!1,e.error=t.payload,e.user=null,e.token=null,e.refreshToken=null,e.isAuthenticated=!1}),e.addCase(L.pending,function(e){e.isLoading=!0}).addCase(L.fulfilled,function(e,t){e.isLoading=!1,e.token=t.payload.token,e.refreshToken=t.payload.refreshToken,e.lastActivity=Date.now(),e.error=null}).addCase(L.rejected,function(e){e.isLoading=!1,e.user=null,e.token=null,e.refreshToken=null,e.isAuthenticated=!1,e.error="Session expired. Please login again."}),e.addCase(C.pending,function(e){e.isLoading=!0}).addCase(C.fulfilled,function(e){e.user=null,e.token=null,e.refreshToken=null,e.isAuthenticated=!1,e.isLoading=!1,e.error=null}).addCase(C.rejected,function(e){e.user=null,e.token=null,e.refreshToken=null,e.isAuthenticated=!1,e.isLoading=!1,e.error=null}),e.addCase(w.pending,function(e){e.isLoading=!0}).addCase(w.fulfilled,function(e,t){e.isLoading=!1,e.user=t.payload,e.isAuthenticated=!0,e.error=null,e.lastActivity=Date.now()}).addCase(w.rejected,function(e,t){e.isLoading=!1,e.error=t.payload})}}),j=E.actions;j.clearError,j.updateLastActivity,j.updateUserProfile,j.clearAuth,j.setLoading;var P=E.reducer,A=(0,g.hg)("orders/fetchOrders",(o=(0,v._)(function(e,t){var r,n,a;return(0,b.Jh)(this,function(e){switch(e.label){case 0:r=t.rejectWithValue,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,k.ZP.getOrders()];case 2:if((n=e.sent()).success)return[2,n.data||[]];return[2,r(n.error||"Failed to fetch orders")];case 3:return[2,r((a=e.sent())instanceof Error?a.message:"Failed to fetch orders")];case 4:return[2]}})}),function(e,t){return o.apply(this,arguments)})),O=(0,g.hg)("orders/createOrder",(u=(0,v._)(function(e,t){var r,n,a;return(0,b.Jh)(this,function(s){switch(s.label){case 0:r=t.rejectWithValue,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,k.ZP.createOrder(e)];case 2:if((n=s.sent()).success)return[2,n.data];return[2,r(n.error||"Failed to create order")];case 3:return[2,r((a=s.sent())instanceof Error?a.message:"Failed to create order")];case 4:return[2]}})}),function(e,t){return u.apply(this,arguments)})),_=(0,g.oM)({name:"orders",initialState:{orders:[],currentOrder:null,activeOrders:[],isLoading:!1,isCreating:!1,error:null,lastUpdated:null},reducers:{clearError:function(e){e.error=null},setCurrentOrder:function(e,t){e.currentOrder=t.payload},updateOrderStatus:function(e,t){var r,n=t.payload,a=n.orderId,s=n.status,i=e.orders.findIndex(function(e){return e.id===a});-1!==i&&(e.orders[i].status=s),(null===(r=e.currentOrder)||void 0===r?void 0:r.id)===a&&(e.currentOrder.status=s);var o=e.activeOrders.findIndex(function(e){return e.id===a});-1!==o&&(e.activeOrders[o].status=s),e.lastUpdated=new Date().toISOString()}},extraReducers:function(e){e.addCase(A.pending,function(e){e.isLoading=!0,e.error=null}).addCase(A.fulfilled,function(e,t){e.isLoading=!1,e.orders=t.payload,e.activeOrders=t.payload.filter(function(e){return!["delivered","cancelled"].includes(e.status)}),e.lastUpdated=new Date().toISOString()}).addCase(A.rejected,function(e,t){e.isLoading=!1,e.error=t.payload}),e.addCase(O.pending,function(e){e.isCreating=!0,e.error=null}).addCase(O.fulfilled,function(e,t){e.isCreating=!1,e.orders.unshift(t.payload),e.activeOrders.unshift(t.payload),e.currentOrder=t.payload,e.lastUpdated=new Date().toISOString()}).addCase(O.rejected,function(e,t){e.isCreating=!1,e.error=t.payload})}}),T=_.actions;T.clearError,T.setCurrentOrder,T.updateOrderStatus;var D=_.reducer,M=r(91005),N=(0,g.hg)("menu/fetchMenuItems",(d=(0,v._)(function(e,t){var r,n;return(0,b.Jh)(this,function(e){switch(e.label){case 0:r=t.rejectWithValue,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,k.ZP.getMenuItems()];case 2:return[2,(n=e.sent()).success&&n.data||[]];case 3:return e.sent(),[2,r("Failed to fetch menu items")];case 4:return[2]}})}),function(e,t){return d.apply(this,arguments)})),I=(0,g.oM)({name:"menu",initialState:{items:[],categories:[],isLoading:!1,error:null},reducers:{clearError:function(e){e.error=null}},extraReducers:function(e){e.addCase(N.pending,function(e){e.isLoading=!0,e.error=null}).addCase(N.fulfilled,function(e,t){e.isLoading=!1,e.items=t.payload,e.categories=(0,M._)(new Set(t.payload.map(function(e){return e.category})))}).addCase(N.rejected,function(e,t){e.isLoading=!1,e.error=t.payload})}});I.actions.clearError;var z=I.reducer,F=(0,g.oM)({name:"notification",initialState:{notifications:[],unreadCount:0},reducers:{addNotification:function(e,t){e.notifications.unshift(t.payload),e.unreadCount++}}});F.actions.addNotification;var U=F.reducer,V=(0,g.oM)({name:"payment",initialState:{isProcessing:!1,error:null},reducers:{clearError:function(e){e.error=null}}});V.actions.clearError;var J=V.reducer,Z=(0,g.oM)({name:"rfid",initialState:{isConnected:!1,error:null},reducers:{setConnected:function(e,t){e.isConnected=t.payload}}});Z.actions.setConnected;var R=Z.reducer,W=(0,g.oM)({name:"analytics",initialState:{data:[],isLoading:!1},reducers:{setLoading:function(e,t){e.isLoading=t.payload}}});W.actions.setLoading;var B=W.reducer,K=(0,g.oM)({name:"ui",initialState:{theme:"light",language:"en",sidebarOpen:!0,loading:!1,error:null},reducers:{setTheme:function(e,t){e.theme=t.payload},setLanguage:function(e,t){e.language=t.payload},toggleSidebar:function(e){e.sidebarOpen=!e.sidebarOpen},setLoading:function(e,t){e.loading=t.payload},setError:function(e,t){e.error=t.payload}}}),q=K.actions;q.setTheme,q.setLanguage,q.toggleSidebar,q.setLoading,q.setError;var H=K.reducer,Y=(0,h.UY)({auth:P,order:D,menu:z,notification:U,payment:J,rfid:R,analytics:B,ui:H}),G={key:"root",storage:p.Z,whitelist:["auth","ui"],blacklist:["order","menu"]},Q=(0,m.OJ)(G,Y),X=(0,g.xC)({reducer:Q,middleware:function(e){return e({serializableCheck:{ignoredActions:[m._P,m.I2,m.E7,m.ex,m.e,m.Nz]}})},devTools:!1}),$=(0,m.p5)(X);function ee(e){var t=e.children;return(0,c.jsx)(l.zt,{store:X,children:(0,c.jsx)(f.r,{loading:null,persistor:$,children:t})})}},12228:function(e,t,r){"use strict";r.r(t),r.d(t,{ThemeProvider:function(){return u}});var n=r(41369),a=r(43654),s=r(75104),i=r(57437);r(2265);var o=r(91350);function u(e){var t=e.children,r=(0,s._)(e,["children"]);return(0,i.jsx)(o.f,(0,a._)((0,n._)({},r),{children:t}))}},86227:function(e,t,r){"use strict";r.r(t),r.d(t,{PaperShadersBackground:function(){return s}});var n=r(57437);r(2265);var a=r(78180),s=function(){return(0,n.jsxs)("div",{className:"fixed inset-0 -z-10 overflow-hidden bg-black",children:[(0,n.jsx)("div",{className:"absolute inset-0",children:(0,n.jsx)(a.bL,{speed:.3,colors:["#000000","#1a0133","#2d0a4e","#000000","#4c1d95","#7c3aed","#000000","#ffffff","#1a0133"],style:{width:"100%",height:"100%",opacity:1}})}),(0,n.jsx)("div",{className:"absolute inset-0",children:(0,n.jsx)(a.bL,{speed:.2,colors:["#000000","#3b0764","#581c87","#000000","#6b21a8","#8b5cf6","#000000","#f3f4f6","#1f0937"],style:{width:"100%",height:"100%",opacity:.6,mixBlendMode:"overlay"}})}),(0,n.jsx)("div",{className:"absolute inset-0 opacity-20",children:(0,n.jsx)(a.bL,{speed:.15,colors:["#000000","#ffffff","#8b5cf6","#000000","#c4b5fd","#1e1b4b","#000000","#ffffff","#0f0a1e"],style:{width:"100%",height:"100%",mixBlendMode:"soft-light"}})})]})};t.default=s},40114:function(e,t,r){"use strict";r.r(t),r.d(t,{Toaster:function(){return d}});var n=r(85063),a=r(56984),s=r(41369),i=r(57437),o=r(91350),u=r(71424),d=function(e){var t=(0,n._)({},(0,a._)(e)),r=(0,o.F)().theme;return(0,i.jsx)(u.x7,(0,s._)({theme:void 0===r?"system":r,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-white group-[.toaster]:text-gray-950 group-[.toaster]:border-gray-200 group-[.toaster]:shadow-lg dark:group-[.toaster]:bg-gray-950 dark:group-[.toaster]:text-gray-50 dark:group-[.toaster]:border-gray-800",description:"group-[.toast]:text-gray-500 dark:group-[.toast]:text-gray-400",actionButton:"group-[.toast]:bg-primary-500 group-[.toast]:text-white dark:group-[.toast]:bg-primary-400 dark:group-[.toast]:text-gray-950",cancelButton:"group-[.toast]:bg-gray-100 group-[.toast]:text-gray-500 dark:group-[.toast]:bg-gray-800 dark:group-[.toast]:text-gray-400"}}},t))}},62471:function(){}},function(e){e.O(0,[7895,1424,8052,6430,6755,5700,2971,596,1744],function(){return e(e.s=6374)}),_N_E=e.O()}]);