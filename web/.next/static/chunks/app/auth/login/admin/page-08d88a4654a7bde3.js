(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6017],{29369:function(e,n,r){Promise.resolve().then(r.bind(r,81482))},98864:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=r(41369),a=r(43654);Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return u}});var E=r(70817);r(2265);var s=E._(r(90533));function _(e){return{default:(null==e?void 0:e.default)||e}}function u(e,n){var r=s.default,E={loading:function(e){return e.error,e.isLoading,e.pastDelay,null}};"function"==typeof e&&(E.loader=e),Object.assign(E,n);var u=E.loader;return r(a._(t._({},E),{loader:function(){return null!=u?u().then(_):Promise.resolve(_(function(){return null}))}}))}("function"==typeof n.default||"object"==typeof n.default&&null!==n.default)&&void 0===n.default.__esModule&&(Object.defineProperty(n.default,"__esModule",{value:!0}),Object.assign(n.default,n),e.exports=n.default)},33699:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),function(e,n){for(var r in n)Object.defineProperty(e,r,{enumerable:!0,get:n[r]})}(n,{suspense:function(){return a},NoSSR:function(){return E}}),r(70817),r(2265);var t=r(37669);function a(){var e=Error(t.NEXT_DYNAMIC_NO_SSR_CODE);throw e.digest=t.NEXT_DYNAMIC_NO_SSR_CODE,e}function E(e){return e.children}},90533:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return E}});var t=r(70817)._(r(2265)),a=r(33699),E=function(e){var n=Object.assign({loader:null,loading:null,ssr:!0},e);function r(e){var r=n.loading,E=t.default.createElement(r,{isLoading:!0,pastDelay:!0,error:null}),s=n.ssr?t.default.Fragment:a.NoSSR,_=n.lazy;return t.default.createElement(t.default.Suspense,{fallback:E},t.default.createElement(s,null,t.default.createElement(_,e)))}return n.lazy=t.default.lazy(n.loader),r.displayName="LoadableComponent",r}},81482:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return N}});var t=r(45610),a=r(97142),E=r(50044),s=r(57437),_=r(2265),u=r(24033),i=r(98864),o=r.n(i),l=r(75157),d=r(73043),c=r(26755),A=r(42812),S=o()(function(){return r.e(7513).then(r.bind(r,7513)).then(function(e){return{default:e.SafariCompatibleLoginForm}})},{loadableGenerated:{webpack:function(){return[7513]}},ssr:!1,loading:function(){return(0,s.jsx)("div",{className:"w-full max-w-md space-y-8 p-6",children:(0,s.jsxs)("div",{className:"animate-pulse",children:[(0,s.jsx)("div",{className:"h-8 bg-gray-200 rounded mb-4"}),(0,s.jsx)("div",{className:"h-12 bg-gray-200 rounded mb-4"}),(0,s.jsx)("div",{className:"h-12 bg-gray-200 rounded mb-4"}),(0,s.jsx)("div",{className:"h-12 bg-gray-200 rounded"})]})})}});function R(e){return({admin:"/dashboard/admin",teacher:"/dashboard/teacher",parent:"/dashboard/parent",student:"/dashboard/student",vendor:"/dashboard/vendor",kitchen_staff:"/dashboard/kitchen",school_admin:"/dashboard/school-admin"})[e]||"/dashboard"}function N(){var e,n,r=(0,a._)((0,_.useState)(!1),2),i=r[0],o=r[1],N=(0,a._)((0,_.useState)(null),2),T=N[0],f=N[1],I=(0,a._)((0,_.useState)(!1),2),O=I[0],D=I[1],m=(0,c.useAuth)(),h=m.login;m.user;var M=(0,u.useRouter)();(0,_.useEffect)(function(){var e=navigator.userAgent.toLowerCase();D(/safari/.test(e)&&!/chrome/.test(e)&&!/chromium/.test(e))},[]);var P=(e=(0,t._)(function(e){return(0,E.Jh)(this,function(n){switch(n.label){case 0:o(!0),f(null),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,h({email:e.email,password:e.password,role:e.role,rememberMe:e.rememberMe||!1})];case 2:return n.sent()?setTimeout(function(){try{var n=localStorage.getItem("demoUser");if(n){var r=JSON.parse(n),t=R(r.role);M.push(t);return}}catch(e){}var a=R(e.role);M.push(a)},100):f("Invalid email or password. Please try again."),[3,5];case 3:return f(n.sent().message||"An unexpected error occurred. Please try again."),[3,5];case 4:return o(!1),[7];case 5:return[2]}})}),function(n){return e.apply(this,arguments)}),C=(n=(0,t._)(function(e){return(0,E.Jh)(this,function(e){return f(null),f("Social login is coming soon!"),[2]})}),function(e){return n.apply(this,arguments)});return(0,s.jsx)(d.AuthLayout,{title:"Admin Login - HASIVU",description:"System administration and management access",children:O?(0,s.jsx)(S,{onSubmit:P,onSocialLogin:C,isLoading:i,error:T,defaultRole:A.i4.ADMIN,className:"w-full max-w-md"}):(0,s.jsx)(l.U,{onSubmit:P,onSocialLogin:C,isLoading:i,error:T,defaultRole:"admin",className:"w-full max-w-md"})})}},42812:function(e,n,r){"use strict";r.d(n,{AT:function(){return l},i4:function(){return E},y3:function(){return s}});var t,a,E,s,_,u=r(86335),i=r(21575);(t=E||(E={})).ADMIN="admin",t.TEACHER="teacher",t.PARENT="parent",t.STUDENT="student",t.VENDOR="vendor",t.KITCHEN_STAFF="kitchen_staff",t.SCHOOL_ADMIN="school_admin",(a=s||(s={})).READ_USERS="read_users",a.WRITE_USERS="write_users",a.DELETE_USERS="delete_users",a.MANAGE_USERS="manage_users",a.READ_ORDERS="read_orders",a.WRITE_ORDERS="write_orders",a.DELETE_ORDERS="delete_orders",a.PLACE_ORDERS="place_orders",a.UPDATE_ORDER_STATUS="update_order_status",a.READ_MENU="read_menu",a.WRITE_MENU="write_menu",a.MANAGE_MENU="manage_menu",a.READ_PAYMENTS="read_payments",a.WRITE_PAYMENTS="write_payments",a.MANAGE_PAYMENT_METHODS="manage_payment_methods",a.PROCESS_PAYMENTS="process_payments",a.READ_ANALYTICS="read_analytics",a.VIEW_REPORTS="view_reports",a.EXPORT_DATA="export_data",a.ADMIN_ACCESS="admin_access",a.SCHOOL_ADMIN_ACCESS="school_admin_access",a.SYSTEM_SETTINGS="system_settings",a.KITCHEN_ACCESS="kitchen_access",a.MANAGE_INVENTORY="manage_inventory",a.VIEW_KITCHEN_QUEUE="view_kitchen_queue",a.VIEW_OWN_ORDERS="view_own_orders",a.UPDATE_PROFILE="update_profile",a.VIEW_STUDENT_ORDERS="view_student_orders",a.MANAGE_CHILDREN="manage_children",a.VIEW_NOTIFICATIONS="view_notifications",a.SEND_NOTIFICATIONS="send_notifications";var o=(_={},(0,i._)(_,E.ADMIN,[s.ADMIN_ACCESS,s.MANAGE_USERS,s.READ_USERS,s.WRITE_USERS,s.DELETE_USERS,s.READ_ORDERS,s.WRITE_ORDERS,s.DELETE_ORDERS,s.UPDATE_ORDER_STATUS,s.READ_MENU,s.WRITE_MENU,s.MANAGE_MENU,s.READ_PAYMENTS,s.WRITE_PAYMENTS,s.PROCESS_PAYMENTS,s.READ_ANALYTICS,s.VIEW_REPORTS,s.EXPORT_DATA,s.SYSTEM_SETTINGS,s.SEND_NOTIFICATIONS,s.VIEW_NOTIFICATIONS]),(0,i._)(_,E.SCHOOL_ADMIN,[s.SCHOOL_ADMIN_ACCESS,s.READ_USERS,s.WRITE_USERS,s.READ_ORDERS,s.WRITE_ORDERS,s.UPDATE_ORDER_STATUS,s.READ_MENU,s.WRITE_MENU,s.MANAGE_MENU,s.READ_PAYMENTS,s.READ_ANALYTICS,s.VIEW_REPORTS,s.EXPORT_DATA,s.SEND_NOTIFICATIONS,s.VIEW_NOTIFICATIONS]),(0,i._)(_,E.TEACHER,[s.READ_ORDERS,s.VIEW_STUDENT_ORDERS,s.READ_MENU,s.VIEW_REPORTS,s.UPDATE_PROFILE,s.VIEW_NOTIFICATIONS]),(0,i._)(_,E.PARENT,[s.PLACE_ORDERS,s.VIEW_STUDENT_ORDERS,s.MANAGE_CHILDREN,s.READ_MENU,s.READ_PAYMENTS,s.MANAGE_PAYMENT_METHODS,s.UPDATE_PROFILE,s.VIEW_NOTIFICATIONS]),(0,i._)(_,E.STUDENT,[s.PLACE_ORDERS,s.VIEW_OWN_ORDERS,s.READ_MENU,s.UPDATE_PROFILE,s.VIEW_NOTIFICATIONS]),(0,i._)(_,E.VENDOR,[s.READ_ORDERS,s.MANAGE_MENU,s.READ_MENU,s.WRITE_MENU,s.MANAGE_INVENTORY,s.VIEW_REPORTS,s.READ_ANALYTICS,s.UPDATE_PROFILE,s.VIEW_NOTIFICATIONS]),(0,i._)(_,E.KITCHEN_STAFF,[s.KITCHEN_ACCESS,s.READ_ORDERS,s.UPDATE_ORDER_STATUS,s.VIEW_KITCHEN_QUEUE,s.MANAGE_INVENTORY,s.READ_MENU,s.UPDATE_PROFILE,s.VIEW_NOTIFICATIONS]),_),l=function(){function e(){(0,u._)(this,e)}return e.hasPermission=function(e,n){return!!e&&(o[e.role]||[]).includes(n)},e.hasAnyPermission=function(e,n){var r=this;return!!e&&n.some(function(n){return r.hasPermission(e,n)})},e.hasAllPermissions=function(e,n){var r=this;return!!e&&n.every(function(n){return r.hasPermission(e,n)})},e.hasRole=function(e,n){return!!e&&e.role===n},e.hasAnyRole=function(e,n){return!!e&&n.includes(e.role)},e.isAdmin=function(e){return this.hasAnyRole(e,[E.ADMIN,E.SCHOOL_ADMIN])},e.canManageUsers=function(e){return this.hasPermission(e,s.MANAGE_USERS)},e.canPlaceOrders=function(e){return this.hasPermission(e,s.PLACE_ORDERS)},e.canViewAnalytics=function(e){return this.hasPermission(e,s.READ_ANALYTICS)},e}()}},function(e){e.O(0,[7895,8293,7554,8140,8653,6430,6755,5810,3043,5157,2971,596,1744],function(){return e(e.s=29369)}),_N_E=e.O()}]);