(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6047],{74530:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(9116);let a=(0,s.Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},76020:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var s=r(9116);let a=(0,s.Z)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},23352:function(e,t,r){Promise.resolve().then(r.bind(r,4225))},4225:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return R}});var s=r(45610),a=r(97142),n=r(50044),i=r(57437),o=r(2265),l=r(24033),c=r(41369),m=r(43654),d=r(61865),u=r(38110),f=r(74530),h=r(63715),p=r(76020),x=r(1295),y=r(73067),g=r(61396),_=r.n(g),v=r(93378),w=r(16357),b=r(93695),N=r(64992),Z=r(15627);function j(e){var t,r=e.onSubmit,a=e.isLoading,o=void 0!==a&&a,l=e.error,g=e.success,j=void 0!==g&&g,F=e.className,P=(0,d.cI)({resolver:(0,u.F)(Z.ek),defaultValues:{email:""}}),R=(t=(0,s._)(function(e){return(0,n.Jh)(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,r(e)];case 1:case 2:return t.sent(),[3,3];case 3:return[2]}})}),function(e){return t.apply(this,arguments)}),I=P.watch("email");return(0,i.jsxs)(w.Zb,{className:F,"aria-label":"Forgot password form",children:[(0,i.jsxs)(w.Ol,{className:"space-y-1 text-center",children:[(0,i.jsx)(w.ll,{className:"text-3xl font-bold text-primary-600",children:j?"Check Your Email":"Forgot Password?"}),(0,i.jsx)(w.SZ,{className:"text-gray-600",children:j?"We've sent password reset instructions to your email":"Enter your email address and we'll send you instructions to reset your password"})]}),(0,i.jsx)(w.aY,{className:"space-y-4",children:j?(0,i.jsxs)("div",{className:"text-center space-y-4",children:[(0,i.jsx)("div",{className:"mx-auto w-16 h-16 bg-success-100 rounded-full flex items-center justify-center",children:(0,i.jsx)(f.Z,{className:"w-8 h-8 text-success-600"})}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"We've sent password reset instructions to:"}),(0,i.jsx)("p",{className:"font-medium text-gray-900",children:I})]}),(0,i.jsx)("div",{className:"p-4 bg-info-50 border border-info-200 rounded-md",children:(0,i.jsxs)("div",{className:"text-sm text-info-700",children:[(0,i.jsx)("p",{className:"font-medium mb-1",children:"Didn't receive the email?"}),(0,i.jsxs)("ul",{className:"space-y-1 text-left",children:[(0,i.jsx)("li",{children:"• Check your spam/junk folder"}),(0,i.jsx)("li",{children:"• Make sure the email address is correct"}),(0,i.jsx)("li",{children:"• The link expires in 15 minutes"})]})]})}),(0,i.jsx)(v.Button,{onClick:function(){return P.handleSubmit(R)()},variant:"outline",disabled:o,className:"w-full",children:o?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Resending..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),"Resend Email"]})})]}):(0,i.jsxs)(i.Fragment,{children:[l&&(0,i.jsx)("div",{className:"p-3 rounded-md bg-error-50 border border-error-200 text-error-700 text-sm",role:"alert","aria-live":"polite",children:l}),(0,i.jsx)(N.Form,(0,m._)((0,c._)({},P),{children:(0,i.jsxs)("form",{onSubmit:P.handleSubmit(R),className:"space-y-4",children:[(0,i.jsx)(N.FormField,{control:P.control,name:"email",render:function(e){var t=e.field;return(0,i.jsxs)(N.FormItem,{children:[(0,i.jsx)(N.FormLabel,{className:"text-gray-700",children:"Email Address"}),(0,i.jsx)(N.FormControl,{children:(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),(0,i.jsx)(b.Input,(0,m._)((0,c._)({},t),{type:"email",placeholder:"Enter your email address",className:"pl-10",autoComplete:"email",disabled:o}))]})}),(0,i.jsx)(N.FormMessage,{})]})}}),(0,i.jsx)(v.Button,{type:"submit",className:"w-full bg-primary-600 hover:bg-primary-700 text-white font-medium py-2.5",disabled:o,size:"lg",children:o?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(h.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending instructions..."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),"Send Reset Instructions"]})})]})}))]})}),(0,i.jsx)(w.eW,{className:"flex flex-col space-y-2 text-center text-sm text-gray-600",children:(0,i.jsxs)(_(),{href:"/auth/login",className:"inline-flex items-center text-primary-600 hover:text-primary-500 font-medium focus:outline-none focus:underline",children:[(0,i.jsx)(y.Z,{className:"mr-1 h-4 w-4"}),"Back to sign in"]})})]})}var F=r(73043),P=r(26755);function R(){var e,t=(0,a._)((0,o.useState)(!1),2),r=t[0],c=t[1],m=(0,a._)((0,o.useState)(!1),2),d=m[0],u=m[1],f=(0,a._)((0,o.useState)(null),2),h=f[0],p=f[1],x=(0,P.useAuth)().forgotPassword,y=(0,l.useRouter)(),g=(e=(0,s._)(function(e){return(0,n.Jh)(this,function(t){switch(t.label){case 0:c(!0),p(null),t.label=1;case 1:return t.trys.push([1,3,4,5]),[4,x(e.email)];case 2:return t.sent()?u(!0):p("Failed to send password reset instructions. Please try again."),[3,5];case 3:return p(t.sent().message||"An unexpected error occurred. Please try again."),[3,5];case 4:return c(!1),[7];case 5:return[2]}})}),function(t){return e.apply(this,arguments)});return d?(0,i.jsx)(F.AuthLayout,{title:"Check Your Email",description:"We've sent password reset instructions to your email address",children:(0,i.jsx)("div",{className:"w-full max-w-md text-center",children:(0,i.jsxs)("div",{className:"p-6 bg-green-50 border border-green-200 rounded-lg",children:[(0,i.jsx)("div",{className:"text-green-700 mb-4",children:(0,i.jsx)("svg",{className:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,i.jsx)("h3",{className:"text-lg font-medium text-green-900 mb-2",children:"Reset Instructions Sent"}),(0,i.jsx)("p",{className:"text-green-700 mb-4",children:"If an account with this email exists, we've sent you a password reset link."}),(0,i.jsx)("button",{onClick:function(){return y.push("/auth/login")},className:"text-primary-600 hover:text-primary-500 font-medium",children:"Return to Login"})]})})}):(0,i.jsx)(F.AuthLayout,{title:"Forgot Your Password?",description:"Enter your email address and we'll send you a reset link",children:(0,i.jsx)(j,{onSubmit:g,isLoading:r,error:h,className:"w-full max-w-md"})})}},15627:function(e,t,r){"use strict";r.d(t,{dm:function(){return i},ek:function(){return o},gY:function(){return l}});var s=r(86418),a=s.Z_().email("Please enter a valid email address"),n=s.Z_().min(8,"Password must be at least 8 characters").regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/,"Password must contain uppercase, lowercase, number, and special character");s.Ry({email:a,password:s.Z_().min(1,"Password is required"),rememberMe:s.O7().optional().default(!1),role:s.Km(["student","parent","teacher","kitchen","admin"]).optional()});var i=s.Ry({email:a,password:s.Z_().min(8,"Password must be at least 8 characters"),rememberMe:s.O7().optional()}),o=s.Ry({email:a,recoveryMethod:s.Km(["email","sms","security_questions"]).default("email")});s.Ry({question1:s.Z_().min(1,"Please select a security question"),answer1:s.Z_().min(3,"Answer must be at least 3 characters"),question2:s.Z_().min(1,"Please select a second security question"),answer2:s.Z_().min(3,"Answer must be at least 3 characters"),question3:s.Z_().min(1,"Please select a third security question"),answer3:s.Z_().min(3,"Answer must be at least 3 characters")}),s.Ry({parentEmail:a,studentId:s.Z_().min(1,"Student ID is required"),relationshipType:s.Km(["parent","guardian","emergency_contact"]),verificationCode:s.Z_().length(6,"Verification code must be 6 digits"),phoneNumber:s.Z_().regex(/^\+?[\d\s\-()]+$/,"Please enter a valid phone number")}),s.Ry({email:a,password:n,confirmPassword:s.Z_(),role:s.Km(["student","parent","teacher","kitchen","admin"]),acceptTerms:s.O7().refine(function(e){return!0===e},{message:"You must accept the terms and conditions"})}).refine(function(e){return e.password===e.confirmPassword},{message:"Passwords don't match",path:["confirmPassword"]}),s.Ry({firstName:s.Z_().min(2,"First name must be at least 2 characters"),lastName:s.Z_().min(2,"Last name must be at least 2 characters"),phoneNumber:s.Z_().regex(/^\+?[\d\s\-()]+$/,"Please enter a valid phone number"),dateOfBirth:s.Z_().refine(function(e){var t=new Date(e);return t<=new Date&&t.getFullYear()>1900},"Please enter a valid date of birth"),grade:s.Z_().optional(),studentId:s.Z_().optional()}),s.Ry({emergencyContactName:s.Z_().min(2,"Emergency contact name is required"),emergencyContactPhone:s.Z_().regex(/^\+?[\d\s\-()]+$/,"Please enter a valid phone number"),emergencyContactRelation:s.Z_().min(1,"Please specify relationship"),medicalConditions:s.Z_().optional(),allergies:s.IX(s.Z_()).optional(),dietaryRestrictions:s.IX(s.Z_()).optional(),notificationPreferences:s.Ry({email:s.O7().default(!0),sms:s.O7().default(!1),push:s.O7().default(!0)}).optional()});var l=s.Ry({firstName:s.Z_().min(2,"First name must be at least 2 characters"),lastName:s.Z_().min(2,"Last name must be at least 2 characters"),email:a,password:n,confirmPassword:s.Z_(),grade:s.Z_().optional(),section:s.Z_().optional()}).refine(function(e){return e.password===e.confirmPassword},{message:"Passwords don't match",path:["confirmPassword"]});s.Ry({token:s.Z_().min(1,"Reset token is required"),password:n,confirmPassword:s.Z_()}).refine(function(e){return e.password===e.confirmPassword},{message:"Passwords don't match",path:["confirmPassword"]}),s.Ry({code:s.Z_().length(6,"Verification code must be 6 digits"),trustDevice:s.O7().optional().default(!1)}),s.Ry({method:s.Km(["totp","sms","email"]),phoneNumber:s.Z_().optional(),backupEmail:s.Z_().email().optional()}).refine(function(e){return"sms"!==e.method||!!e.phoneNumber},{message:"Phone number is required for SMS verification",path:["phoneNumber"]}),s.Ry({codes:s.IX(s.Z_()).min(8,"Must have at least 8 recovery codes"),acknowledged:s.O7().refine(function(e){return!0===e},{message:"You must acknowledge that you have saved your recovery codes"})}),s.Ry({firstName:s.Z_().min(2,"First name must be at least 2 characters"),lastName:s.Z_().min(2,"Last name must be at least 2 characters"),email:a,phoneNumber:s.Z_().regex(/^\+?[\d\s\-()]+$/,"Please enter a valid phone number"),dateOfBirth:s.Z_().optional(),grade:s.Z_().optional(),studentId:s.Z_().optional(),emergencyContacts:s.IX(s.Ry({name:s.Z_().min(2,"Contact name is required"),phone:s.Z_().regex(/^\+?[\d\s\-()]+$/,"Please enter a valid phone number"),relation:s.Z_().min(1,"Please specify relationship")})).optional(),medicalInfo:s.Ry({conditions:s.Z_().optional(),medications:s.Z_().optional(),allergies:s.IX(s.Z_()).optional(),dietaryRestrictions:s.IX(s.Z_()).optional()}).optional(),preferences:s.Ry({notifications:s.Ry({email:s.O7().default(!0),sms:s.O7().default(!1),push:s.O7().default(!0)}).optional(),language:s.Z_().default("en"),timezone:s.Z_().default("UTC")}).optional()}),s.Ry({rfidTag:s.Z_().min(8,"RFID tag must be at least 8 characters"),studentId:s.Z_().min(1,"Student ID is required"),verificationMethod:s.Km(["pin","biometric","admin_approval"]),pin:s.Z_().optional()}).refine(function(e){return"pin"!==e.verificationMethod||!!e.pin},{message:"PIN is required when using PIN verification",path:["pin"]}),s.Ry({rfidTag:s.Z_().min(1,"RFID tag is required"),studentId:s.Z_().optional()})},64992:function(e,t,r){"use strict";r.r(t),r.d(t,{Form:function(){return h},FormControl:function(){return w},FormDescription:function(){return b},FormField:function(){return x},FormItem:function(){return _},FormLabel:function(){return v},FormMessage:function(){return N},useFormField:function(){return y}});var s=r(85063),a=r(56984),n=r(41369),i=r(43654),o=r(75104),l=r(57437),c=r(2265),m=r(67256),d=r(61865),u=r(22703),f=r(58020),h=d.RV,p=c.createContext({}),x=function(e){var t=(0,s._)({},(0,a._)(e));return(0,l.jsx)(p.Provider,{value:{name:t.name},children:(0,l.jsx)(d.Qr,(0,n._)({},t))})},y=function(){var e=c.useContext(p),t=c.useContext(g),r=(0,d.Gc)(),s=r.getFieldState,a=r.formState,i=s(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");var o=t.id;return(0,n._)({id:o,name:e.name,formItemId:"".concat(o,"-form-item"),formDescriptionId:"".concat(o,"-form-item-description"),formMessageId:"".concat(o,"-form-item-message")},i)},g=c.createContext({}),_=c.forwardRef(function(e,t){var r=e.className,s=(0,o._)(e,["className"]),a=c.useId();return(0,l.jsx)(g.Provider,{value:{id:a},children:(0,l.jsx)("div",(0,n._)({ref:t,className:(0,u.cn)("space-y-2",r)},s))})});_.displayName="FormItem";var v=c.forwardRef(function(e,t){var r=e.className,s=(0,o._)(e,["className"]),a=y(),i=a.error,c=a.formItemId;return(0,l.jsx)(f._,(0,n._)({ref:t,className:(0,u.cn)(i&&"text-destructive",r),htmlFor:c},s))});v.displayName="FormLabel";var w=c.forwardRef(function(e,t){var r=(0,s._)({},(0,a._)(e)),i=y(),o=i.error,c=i.formItemId,d=i.formDescriptionId,u=i.formMessageId;return(0,l.jsx)(m.g7,(0,n._)({ref:t,id:c,"aria-describedby":o?"".concat(d," ").concat(u):"".concat(d),"aria-invalid":!!o},r))});w.displayName="FormControl";var b=c.forwardRef(function(e,t){var r=e.className,s=(0,o._)(e,["className"]),a=y().formDescriptionId;return(0,l.jsx)("p",(0,n._)({ref:t,id:a,className:(0,u.cn)("text-sm text-muted-foreground",r)},s))});b.displayName="FormDescription";var N=c.forwardRef(function(e,t){var r,s=e.className,a=e.children,c=(0,o._)(e,["className","children"]),m=y(),d=m.error,f=m.formMessageId,h=d?String(null!==(r=null==d?void 0:d.message)&&void 0!==r?r:""):a;return h?(0,l.jsx)("p",(0,i._)((0,n._)({ref:t,id:f,className:(0,u.cn)("text-sm font-medium text-destructive",s)},c),{children:h})):null});N.displayName="FormMessage"},58020:function(e,t,r){"use strict";r.d(t,{_:function(){return d}});var s=r(41369),a=r(75104),n=r(57437),i=r(2265),o=r(36743),l=r(96061),c=r(22703),m=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef(function(e,t){var r=e.className,i=(0,a._)(e,["className"]);return(0,n.jsx)(o.f,(0,s._)({ref:t,className:(0,c.cn)(m(),r)},i))});d.displayName=o.f.displayName},9381:function(e,t,r){"use strict";r.d(t,{WV:function(){return o},jH:function(){return l}});var s=r(2265),a=r(54887),n=r(67256),i=r(57437),o=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,n.Z8)(`Primitive.${t}`),a=s.forwardRef((e,s)=>{let{asChild:a,...n}=e,o=a?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(o,{...n,ref:s})});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function l(e,t){e&&a.flushSync(()=>e.dispatchEvent(t))}}},function(e){e.O(0,[7895,8293,8653,6430,6755,5810,3043,2971,596,1744],function(){return e(e.s=23352)}),_N_E=e.O()}]);