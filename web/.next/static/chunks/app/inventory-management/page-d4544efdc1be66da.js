(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8913],{81940:function(e,s,t){Promise.resolve().then(t.bind(t,91169))},91169:function(e,s,t){"use strict";t.r(s),t.d(s,{InventoryManagement:function(){return z}});var a=t(45610),r=t(97142),n=t(91005),l=t(50044),i=t(57437),c=t(2265),d=t(4631),o=t(69806),u=t(6141),m=t(53589),x=t(93505),h=t(99670),f=t(74530),p=t(35817),j=t(31541),g=t(9883),v=t(4322),N=t(41298),b=t(85790),y=t(72642),w=t(63715),_=t(93378),k=t(16357),S=t(99605),T=t(79230),C=t(19690),D=t(93695),I=t(6780),E=t(6353),O=t(58020),R=t(61751),Z=t(36194),L=function(e){switch(e){case"in_stock":return"bg-green-100 text-green-800 border-green-200";case"low_stock":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"out_of_stock":case"expired":return"bg-red-100 text-red-800 border-red-200";case"ordered":return"bg-blue-100 text-blue-800 border-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},A=function(e){switch(e){case"draft":default:return"bg-gray-100 text-gray-800 border-gray-200";case"sent":return"bg-blue-100 text-blue-800 border-blue-200";case"confirmed":return"bg-green-100 text-green-800 border-green-200";case"delivered":return"bg-purple-100 text-purple-800 border-purple-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200"}},M=function(e){var s=new Date;return Math.ceil((new Date(e).getTime()-s.getTime())/864e5)},V=function(e){var s=e.item,t=e.onReorder,a=s.currentStock/s.maxStock*100,r=s.expiryDate&&3>=M(s.expiryDate);return(0,i.jsx)(k.Zb,{className:"hover:shadow-lg transition-shadow",children:(0,i.jsxs)(k.aY,{className:"pt-4",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[s.image&&(0,i.jsx)("img",{src:s.image,alt:s.name,className:"w-12 h-12 rounded-lg object-cover"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900",children:s.name}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:[s.category," â€¢ ",s.subcategory]}),(0,i.jsx)("p",{className:"text-xs text-gray-500",children:s.sku})]})]}),(0,i.jsx)(S.C,{className:"".concat(L(s.status)," border"),children:s.status.replace("_"," ")})]}),(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm mb-2",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Stock Level"}),(0,i.jsxs)("span",{className:"font-semibold ".concat("low_stock"===s.status?"text-orange-600":"out_of_stock"===s.status?"text-red-600":"text-gray-900"),children:[s.currentStock," ",s.unit]})]}),(0,i.jsx)(T.E,{value:a,className:"h-3"}),(0,i.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[(0,i.jsxs)("span",{children:["Min: ",s.minStock]}),(0,i.jsxs)("span",{children:["Max: ",s.maxStock]})]})]}),(0,i.jsxs)("div",{className:"space-y-2 mb-4",children:["low_stock"===s.status&&(0,i.jsxs)("div",{className:"flex items-center p-2 bg-yellow-50 border border-yellow-200 rounded",children:[(0,i.jsx)(d.Z,{className:"w-4 h-4 text-yellow-600 mr-2"}),(0,i.jsx)("span",{className:"text-xs text-yellow-800",children:"Low stock - reorder needed"})]}),"out_of_stock"===s.status&&(0,i.jsxs)("div",{className:"flex items-center p-2 bg-red-50 border border-red-200 rounded",children:[(0,i.jsx)(o.Z,{className:"w-4 h-4 text-red-600 mr-2"}),(0,i.jsx)("span",{className:"text-xs text-red-800",children:"Out of stock"})]}),r&&(0,i.jsxs)("div",{className:"flex items-center p-2 bg-orange-50 border border-orange-200 rounded",children:[(0,i.jsx)(u.Z,{className:"w-4 h-4 text-orange-600 mr-2"}),(0,i.jsxs)("span",{className:"text-xs text-orange-800",children:["Expires in ",M(s.expiryDate)," days"]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm mb-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-600",children:"Unit Price"}),(0,i.jsxs)("p",{className:"font-semibold",children:["Rs.",s.costPerUnit]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-600",children:"Total Value"}),(0,i.jsxs)("p",{className:"font-semibold",children:["Rs.",s.totalValue]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-600",children:"Usage Rate"}),(0,i.jsxs)("p",{className:"font-semibold",children:[s.usageRate,"/",s.unit,"/day"]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-600",children:"Days Left"}),(0,i.jsxs)("p",{className:"font-semibold ".concat(s.daysUntilEmpty<=3?"text-red-600":"text-gray-900"),children:[s.daysUntilEmpty," days"]})]})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-4",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,i.jsxs)(I.qE,{className:"w-5 h-5",children:[(0,i.jsx)(I.F$,{src:s.supplier.avatar,alt:s.supplier.name}),(0,i.jsx)(I.Q5,{className:"text-xs",children:s.supplier.name.split(" ").map(function(e){return e[0]}).join("")})]}),(0,i.jsx)("span",{children:s.supplier.name})]}),(0,i.jsx)("span",{children:s.location})]}),(0,i.jsxs)("div",{className:"flex space-x-2",children:[(0,i.jsxs)(_.Button,{size:"sm",variant:"outline",className:"flex-1",children:[(0,i.jsx)(m.Z,{className:"w-3 h-3 mr-1"}),"Edit"]}),("low_stock"===s.status||"out_of_stock"===s.status)&&(0,i.jsxs)(_.Button,{size:"sm",className:"flex-1",onClick:function(){return t(s)},"data-testid":"reorder-button-".concat(s.id),children:[(0,i.jsx)(x.Z,{className:"w-3 h-3 mr-1"}),"Reorder"]})]})]})})},P=function(e){var s=e.order,t=e.onMarkDelivered,a=new Date(s.expectedDelivery),r=Math.ceil((a.getTime()-new Date().getTime())/864e5);return(0,i.jsx)(k.Zb,{className:"hover:shadow-lg transition-shadow",children:(0,i.jsxs)(k.aY,{className:"pt-4",children:[(0,i.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900",children:s.orderNumber}),(0,i.jsxs)("div",{className:"flex items-center space-x-2 mt-1",children:[(0,i.jsxs)(I.qE,{className:"w-6 h-6",children:[(0,i.jsx)(I.F$,{src:s.supplier.avatar,alt:s.supplier.name}),(0,i.jsx)(I.Q5,{className:"text-xs",children:s.supplier.name.split(" ").map(function(e){return e[0]}).join("")})]}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:s.supplier.name})]})]}),(0,i.jsx)(S.C,{className:"".concat(A(s.status)," border"),children:s.status.replace("_"," ")})]}),(0,i.jsx)("div",{className:"space-y-2 mb-4",children:s.items.map(function(e,s){return(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm p-2 bg-gray-50 rounded",children:[(0,i.jsxs)("span",{children:[e.quantity," x ",e.itemName]}),(0,i.jsxs)("span",{className:"font-semibold",children:["Rs.",e.totalPrice]})]},s)})}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm mb-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-600",children:"Order Date"}),(0,i.jsx)("p",{className:"font-semibold",children:new Date(s.orderDate).toLocaleDateString()})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-600",children:"Expected Delivery"}),(0,i.jsx)("p",{className:"font-semibold ".concat(r<0?"text-red-600":"text-gray-900"),children:a.toLocaleDateString()})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-600",children:"Total Amount"}),(0,i.jsxs)("p",{className:"font-semibold text-lg",children:["Rs.",s.totalAmount.toLocaleString()]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"text-gray-600",children:"Created By"}),(0,i.jsx)("p",{className:"font-semibold",children:s.createdBy})]})]}),s.notes&&(0,i.jsx)("div",{className:"mb-4 p-2 bg-blue-50 border border-blue-200 rounded",children:(0,i.jsxs)("p",{className:"text-xs text-blue-800",children:[(0,i.jsx)("strong",{children:"Note:"})," ",s.notes]})}),(0,i.jsxs)("div",{className:"flex space-x-2",children:[(0,i.jsxs)(_.Button,{size:"sm",variant:"outline",className:"flex-1",children:[(0,i.jsx)(h.Z,{className:"w-3 h-3 mr-1"}),"View Details"]}),"sent"===s.status&&(0,i.jsxs)(_.Button,{size:"sm",variant:"outline",onClick:function(){return t(s)},"data-testid":"mark-delivered-button-".concat(s.id),children:[(0,i.jsx)(f.Z,{className:"w-3 h-3 mr-1"}),"Mark Delivered"]})]})]})})},B=function(e){var s=e.supplier;return(0,i.jsx)(k.Zb,{className:"hover:shadow-lg transition-shadow",children:(0,i.jsxs)(k.aY,{className:"pt-4",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,i.jsxs)(I.qE,{className:"w-12 h-12",children:[(0,i.jsx)(I.F$,{src:s.avatar,alt:s.name}),(0,i.jsx)(I.Q5,{children:s.name.split(" ").map(function(e){return e[0]}).join("")})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900",children:s.name}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:s.contact}),(0,i.jsx)("p",{className:"text-xs text-gray-500",children:s.email})]})]}),(0,i.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm mb-1",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Rating"}),(0,i.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,i.jsx)("span",{className:"font-semibold",children:s.rating}),(0,i.jsx)("div",{className:"flex",children:(0,n._)([,,,,,]).map(function(e,t){return(0,i.jsx)("div",{className:"w-3 h-3 rounded-full mr-1 ".concat(t<Math.floor(s.rating)?"bg-yellow-400":"bg-gray-200")},t)})})]})]})}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm mb-1",children:[(0,i.jsx)("span",{className:"text-gray-600",children:"Reliability"}),(0,i.jsxs)("span",{className:"font-semibold",children:[s.reliability,"%"]})]}),(0,i.jsx)(T.E,{value:s.reliability,className:"h-2"})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-center mb-4",children:[(0,i.jsxs)("div",{className:"p-2 bg-gray-50 rounded",children:[(0,i.jsx)("div",{className:"text-lg font-bold text-gray-900",children:s.averageDeliveryTime}),(0,i.jsx)("div",{className:"text-xs text-gray-600",children:"Avg Delivery (days)"})]}),(0,i.jsxs)("div",{className:"p-2 bg-gray-50 rounded",children:[(0,i.jsx)("div",{className:"text-lg font-bold text-gray-900",children:s.totalOrders}),(0,i.jsx)("div",{className:"text-xs text-gray-600",children:"Total Orders"})]})]}),(0,i.jsxs)(_.Button,{size:"sm",className:"w-full",children:[(0,i.jsx)(x.Z,{className:"w-3 h-3 mr-1"}),"Create Order"]})]})})},z=function(){var e,s,t,n,o,u,m,x,h,f=(0,r._)((0,c.useState)("inventory"),2),S=f[0],I=f[1],L=(0,r._)((0,c.useState)(""),2),A=L[0],M=L[1],z=(0,r._)((0,c.useState)("all"),2),F=z[0],Y=z[1],q=(0,r._)((0,c.useState)(!1),2),U=q[0],$=q[1],Q=(0,r._)((0,c.useState)(null),2),K=Q[0],G=Q[1],J=(0,r._)((0,c.useState)(0),2),X=J[0],H=J[1],W=(0,R.pm)().toast,ee=(0,Z.AW)(),es=ee.data,et=(ee.loading,ee.error,ee.refetch),ea=(0,Z.L0)(),er=ea.data;ea.loading,ea.error;var en=(0,Z._T)(),el=en.data,ei=(en.loading,en.error,en.refetch),ec=(0,Z.pQ)(),ed=ec.data;ec.loading,ec.error;var eo=(0,Z.d9)(),eu=eo.createPurchaseOrder,em=eo.updatePurchaseOrderStatus,ex=eo.updateStock,eh=eo.loading,ef=es||[],ep=ed||{totalItems:ef.length,totalValue:ef.reduce(function(e,s){return e+(s.totalValue||0)},0),lowStockItems:ef.filter(function(e){return"low_stock"===e.status}).length,expiringSoonItems:0,outOfStockItems:ef.filter(function(e){return"out_of_stock"===e.status}).length,averageStockLevel:0,monthlyConsumption:0,costSavings:0},ej=(0,c.useMemo)(function(){return ef.filter(function(e){var s=(e.name||"").toLowerCase().includes(A.toLowerCase())||(e.category||"").toLowerCase().includes(A.toLowerCase())||(e.sku||"").toLowerCase().includes(A.toLowerCase()),t="all"===F||(e.category||"").toLowerCase()===F;return s&&t})},[ef,A,F]),eg=function(e){G(e),H(Math.max(e.reorderPoint||e.minStock||1,1)),$(!0)},ev=(e=(0,a._)(function(){var e,s;return(0,l.Jh)(this,function(t){switch(t.label){case 0:if(t.trys.push([0,3,,4]),!K||X<=0)return[2];return[4,eu({supplierId:null===(e=K.supplier)||void 0===e?void 0:e.id,items:[{itemId:K.id,quantity:X,unitPrice:K.costPerUnit}]})];case 1:return t.sent(),W({title:"Reorder Created",description:"".concat(K.name," x ").concat(X)}),$(!1),G(null),[4,Promise.all([et(),null===(s=ei)||void 0===s?void 0:s()])];case 2:return t.sent(),I("orders"),[3,4];case 3:return t.sent(),W({title:"Reorder Failed",description:"Please try again.",variant:"destructive"}),[3,4];case 4:return[2]}})}),function(){return e.apply(this,arguments)}),eN=(s=(0,a._)(function(e){var s,t,a,r,n,i,c,d;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return l.trys.push([0,11,,12]),[4,em(e.id,"delivered")];case 1:l.sent(),t=!0,a=!1,r=void 0,l.label=2;case 2:l.trys.push([2,7,8,9]),n=e.items[Symbol.iterator](),l.label=3;case 3:if(t=(i=n.next()).done)return[3,6];return[4,ex((c=i.value).itemId,c.quantity,"add")];case 4:l.sent(),l.label=5;case 5:return t=!0,[3,3];case 6:return[3,9];case 7:return d=l.sent(),a=!0,r=d,[3,9];case 8:try{t||null==n.return||n.return()}finally{if(a)throw r}return[7];case 9:return W({title:"Order Marked Delivered",description:e.orderNumber}),[4,Promise.all([et(),null===(s=ei)||void 0===s?void 0:s()])];case 10:return l.sent(),[3,12];case 11:return l.sent(),W({title:"Update Failed",description:"Could not mark as delivered.",variant:"destructive"}),[3,12];case 12:return[2]}})}),function(e){return s.apply(this,arguments)});return(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50 p-6",children:[(0,i.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-3xl font-bold text-gray-900","data-testid":"inventory-header",children:"Inventory Management"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Track stock levels, manage suppliers, and automate reorders"})]}),(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsxs)(_.Button,{variant:"outline",children:[(0,i.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),"Export"]}),(0,i.jsxs)(_.Button,{variant:"outline",children:[(0,i.jsx)(j.Z,{className:"w-4 h-4 mr-2"}),"Import"]}),(0,i.jsxs)(_.Button,{children:[(0,i.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"Add Item"]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,i.jsx)(k.Zb,{children:(0,i.jsx)(k.aY,{className:"pt-6",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"p-2 bg-blue-100 rounded-full",children:(0,i.jsx)(v.Z,{className:"w-6 h-6 text-blue-600"})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("p",{className:"text-2xl font-bold",children:null!==(t=ep.totalItems)&&void 0!==t?t:"-"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Total Items"})]})]})})}),(0,i.jsx)(k.Zb,{children:(0,i.jsx)(k.aY,{className:"pt-6",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"p-2 bg-green-100 rounded-full",children:(0,i.jsx)(N.Z,{className:"w-6 h-6 text-green-600"})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsxs)("p",{className:"text-2xl font-bold",children:["Rs.",(null!==(n=ep.totalValue)&&void 0!==n?n:0).toLocaleString()]}),(0,i.jsx)("p",{className:"text-gray-600",children:"Total Value"})]})]})})}),(0,i.jsx)(k.Zb,{children:(0,i.jsx)(k.aY,{className:"pt-6",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"p-2 bg-red-100 rounded-full",children:(0,i.jsx)(d.Z,{className:"w-6 h-6 text-red-600"})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsx)("p",{className:"text-2xl font-bold",children:null!==(o=ep.lowStockItems)&&void 0!==o?o:0}),(0,i.jsx)("p",{className:"text-gray-600",children:"Low Stock Items"})]})]})})}),(0,i.jsx)(k.Zb,{children:(0,i.jsx)(k.aY,{className:"pt-6",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"p-2 bg-orange-100 rounded-full",children:(0,i.jsx)(b.Z,{className:"w-6 h-6 text-orange-600"})}),(0,i.jsxs)("div",{className:"ml-4",children:[(0,i.jsxs)("p",{className:"text-2xl font-bold",children:["Rs.",(null!==(u=ep.costSavings)&&void 0!==u?u:0).toLocaleString()]}),(0,i.jsx)("p",{className:"text-gray-600",children:"Monthly Savings"})]})]})})})]}),(0,i.jsxs)(C.Tabs,{value:S,onValueChange:I,className:"w-full",children:[(0,i.jsxs)(C.TabsList,{className:"grid w-full grid-cols-4",children:[(0,i.jsx)(C.TabsTrigger,{value:"inventory",children:"Inventory"}),(0,i.jsx)(C.TabsTrigger,{value:"orders",children:"Purchase Orders"}),(0,i.jsx)(C.TabsTrigger,{value:"suppliers",children:"Suppliers"}),(0,i.jsx)(C.TabsTrigger,{value:"analytics",children:"Analytics"})]}),(0,i.jsxs)(C.TabsContent,{value:"inventory",className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsx)(D.Input,{placeholder:"Search items by name, category, or SKU...",value:A,onChange:function(e){return M(e.target.value)},className:"w-full"})}),(0,i.jsxs)("select",{className:"px-3 py-2 border border-gray-200 rounded-md",value:F,onChange:function(e){return Y(e.target.value)},children:[(0,i.jsx)("option",{value:"all",children:"All Categories"}),(0,i.jsx)("option",{value:"grains",children:"Grains"}),(0,i.jsx)("option",{value:"protein",children:"Protein"}),(0,i.jsx)("option",{value:"vegetables",children:"Vegetables"}),(0,i.jsx)("option",{value:"oils",children:"Oils"})]}),(0,i.jsxs)(_.Button,{variant:"outline",children:[(0,i.jsx)(y.Z,{className:"w-4 h-4 mr-2"}),"More Filters"]})]}),(itemsError||metricsError)&&(0,i.jsx)("div",{className:"p-3 rounded bg-red-50 border border-red-200 text-red-800",children:"Failed to load inventory data."}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ej.map(function(e){return(0,i.jsx)("div",{"data-testid":"inventory-item",children:(0,i.jsx)(V,{item:e,onReorder:eg})},e.id)})})]}),(0,i.jsxs)(C.TabsContent,{value:"orders",className:"space-y-6",children:[poError&&(0,i.jsx)("div",{className:"p-3 rounded bg-red-50 border border-red-200 text-red-800",children:"Failed to load purchase orders."}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(el||[]).map(function(e){return(0,i.jsx)(P,{order:e,onMarkDelivered:eN},e.id)})})]}),(0,i.jsxs)(C.TabsContent,{value:"suppliers",className:"space-y-6",children:[suppliersError&&(0,i.jsx)("div",{className:"p-3 rounded bg-red-50 border border-red-200 text-red-800",children:"Failed to load suppliers."}),(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(er||[]).map(function(e){return(0,i.jsx)(B,{supplier:e},e.id)})})]}),(0,i.jsx)(C.TabsContent,{value:"analytics",className:"space-y-6",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,i.jsxs)(k.Zb,{children:[(0,i.jsx)(k.Ol,{children:(0,i.jsx)(k.ll,{children:"Monthly Consumption"})}),(0,i.jsxs)(k.aY,{children:[(0,i.jsxs)("div",{className:"text-3xl font-bold text-blue-600 mb-2",children:["Rs.",(null!==(m=ep.monthlyConsumption)&&void 0!==m?m:0).toLocaleString()]}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"+8.5% from last month"})]})]}),(0,i.jsxs)(k.Zb,{children:[(0,i.jsx)(k.Ol,{children:(0,i.jsx)(k.ll,{children:"Average Stock Level"})}),(0,i.jsxs)(k.aY,{children:[(0,i.jsxs)("div",{className:"text-3xl font-bold text-green-600 mb-2",children:[null!==(x=ep.averageStockLevel)&&void 0!==x?x:0,"%"]}),(0,i.jsx)(T.E,{value:null!==(h=ep.averageStockLevel)&&void 0!==h?h:0,className:"mb-2"}),(0,i.jsx)("p",{className:"text-sm text-gray-600",children:"Optimal stock maintenance"})]})]})]})})]})]}),(0,i.jsx)(E.Vq,{open:U,onOpenChange:$,children:(0,i.jsxs)(E.cZ,{children:[(0,i.jsxs)(E.fK,{children:[(0,i.jsx)(E.$N,{children:"Create Purchase Order"}),(0,i.jsxs)(E.Be,{children:["Reorder stock for ",null==K?void 0:K.name]})]}),(0,i.jsxs)("div",{className:"space-y-4 py-2",children:[(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsx)(O._,{children:"Item"}),(0,i.jsx)("div",{className:"text-sm font-medium",children:null==K?void 0:K.name}),(0,i.jsxs)("div",{className:"text-xs text-gray-500",children:["SKU: ",null==K?void 0:K.sku]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[(0,i.jsx)(O._,{htmlFor:"reorder-qty",children:"Quantity"}),(0,i.jsx)(D.Input,{id:"reorder-qty",type:"number",min:1,value:X,onChange:function(e){return H(parseInt(e.target.value||"0",10))},"data-testid":"reorder-qty-input"})]})]}),(0,i.jsxs)(E.cN,{children:[(0,i.jsx)(_.Button,{variant:"outline",onClick:function(){return $(!1)},children:"Cancel"}),(0,i.jsx)(_.Button,{onClick:ev,disabled:eh,"data-testid":"reorder-submit",children:eh?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w.Z,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):"Create Order"})]})]})})]})};s.default=z},6353:function(e,s,t){"use strict";t.d(s,{$N:function(){return g},Be:function(){return v},Vq:function(){return u},cN:function(){return j},cZ:function(){return f},fK:function(){return p},hg:function(){return m}});var a=t(41369),r=t(43654),n=t(75104),l=t(57437),i=t(2265),c=t(62234),d=t(82549),o=t(22703),u=c.fC,m=c.xz,x=c.h_;c.x8;var h=i.forwardRef(function(e,s){var t=e.className,r=(0,n._)(e,["className"]);return(0,l.jsx)(c.aV,(0,a._)({ref:s,className:(0,o.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t)},r))});h.displayName=c.aV.displayName;var f=i.forwardRef(function(e,s){var t=e.className,i=e.children,u=(0,n._)(e,["className","children"]);return(0,l.jsxs)(x,{children:[(0,l.jsx)(h,{}),(0,l.jsxs)(c.VY,(0,r._)((0,a._)({ref:s,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t)},u),{children:[i,(0,l.jsxs)(c.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,l.jsx)(d.Z,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]})});f.displayName=c.VY.displayName;var p=function(e){var s=e.className,t=(0,n._)(e,["className"]);return(0,l.jsx)("div",(0,a._)({className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s)},t))};p.displayName="DialogHeader";var j=function(e){var s=e.className,t=(0,n._)(e,["className"]);return(0,l.jsx)("div",(0,a._)({className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s)},t))};j.displayName="DialogFooter";var g=i.forwardRef(function(e,s){var t=e.className,r=(0,n._)(e,["className"]);return(0,l.jsx)(c.Dx,(0,a._)({ref:s,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",t)},r))});g.displayName=c.Dx.displayName;var v=i.forwardRef(function(e,s){var t=e.className,r=(0,n._)(e,["className"]);return(0,l.jsx)(c.dk,(0,a._)({ref:s,className:(0,o.cn)("text-sm text-muted-foreground",t)},r))});v.displayName=c.dk.displayName},58020:function(e,s,t){"use strict";t.d(s,{_:function(){return u}});var a=t(41369),r=t(75104),n=t(57437),l=t(2265),i=t(36743),c=t(96061),d=t(22703),o=(0,c.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=l.forwardRef(function(e,s){var t=e.className,l=(0,r._)(e,["className"]);return(0,n.jsx)(i.f,(0,a._)({ref:s,className:(0,d.cn)(o(),t)},l))});u.displayName=i.f.displayName},79230:function(e,s,t){"use strict";t.d(s,{E:function(){return o}});var a=t(41369),r=t(43654),n=t(75104),l=t(57437),i=t(2265),c=t(23177),d=t(22703),o=i.forwardRef(function(e,s){var t=e.className,i=e.value,o=(0,n._)(e,["className","value"]);return(0,l.jsx)(c.fC,(0,r._)((0,a._)({ref:s,className:(0,d.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t)},o),{children:(0,l.jsx)(c.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(i||0),"%)")}})}))});o.displayName=c.fC.displayName},19690:function(e,s,t){"use strict";t.r(s),t.d(s,{Tabs:function(){return d},TabsContent:function(){return m},TabsList:function(){return o},TabsTrigger:function(){return u}});var a=t(41369),r=t(75104),n=t(57437),l=t(2265),i=t(88140),c=t(22703),d=i.fC,o=l.forwardRef(function(e,s){var t=e.className,l=(0,r._)(e,["className"]);return(0,n.jsx)(i.aV,(0,a._)({ref:s,className:(0,c.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t)},l))});o.displayName=i.aV.displayName;var u=l.forwardRef(function(e,s){var t=e.className,l=(0,r._)(e,["className"]);return(0,n.jsx)(i.xz,(0,a._)({ref:s,className:(0,c.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t)},l))});u.displayName=i.xz.displayName;var m=l.forwardRef(function(e,s){var t=e.className,l=(0,r._)(e,["className"]);return(0,n.jsx)(i.VY,(0,a._)({ref:s,className:(0,c.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t)},l))});m.displayName=i.VY.displayName},61751:function(e,s,t){"use strict";t.d(s,{pm:function(){return g}});var a=t(85063),r=t(56984),n=t(41369),l=t(43654),i=t(97142),c=t(91005),d=t(2265),o=0,u=new Map,m=function(e){if(!u.has(e)){var s=setTimeout(function(){u.delete(e),p({type:"REMOVE_TOAST",toastId:e})},1e6);u.set(e,s)}},x=function(e,s){switch(s.type){case"ADD_TOAST":return(0,l._)((0,n._)({},e),{toasts:[s.toast].concat((0,c._)(e.toasts)).slice(0,1)});case"UPDATE_TOAST":return(0,l._)((0,n._)({},e),{toasts:e.toasts.map(function(e){return e.id===s.toast.id?(0,n._)({},e,s.toast):e})});case"DISMISS_TOAST":var t=s.toastId;return t?m(t):e.toasts.forEach(function(e){m(e.id)}),(0,l._)((0,n._)({},e),{toasts:e.toasts.map(function(e){return e.id===t||void 0===t?(0,l._)((0,n._)({},e),{open:!1}):e})});case"REMOVE_TOAST":if(void 0===s.toastId)return(0,l._)((0,n._)({},e),{toasts:[]});return(0,l._)((0,n._)({},e),{toasts:e.toasts.filter(function(e){return e.id!==s.toastId})})}},h=[],f={toasts:[]};function p(e){f=x(f,e),h.forEach(function(e){e(f)})}function j(e){var s=(0,a._)({},(0,r._)(e)),t=(o=(o+1)%Number.MAX_SAFE_INTEGER).toString(),i=function(){return p({type:"DISMISS_TOAST",toastId:t})};return p({type:"ADD_TOAST",toast:(0,l._)((0,n._)({},s),{id:t,open:!0,onOpenChange:function(e){e||i()}})}),{id:t,dismiss:i,update:function(e){return p({type:"UPDATE_TOAST",toast:(0,l._)((0,n._)({},e),{id:t})})}}}function g(){var e=(0,i._)(d.useState(f),2),s=e[0],t=e[1];return d.useEffect(function(){return h.push(t),function(){var e=h.indexOf(t);e>-1&&h.splice(e,1)}},[s]),(0,l._)((0,n._)({},s),{toast:j,dismiss:function(e){return p({type:"DISMISS_TOAST",toastId:e})}})}}},function(e){e.O(0,[7895,7554,5906,8140,4611,7075,8856,5810,2232,2971,596,1744],function(){return e(e.s=81940)}),_N_E=e.O()}]);