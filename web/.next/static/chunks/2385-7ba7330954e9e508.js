"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2385],{7564:function(e,r,a){a.d(r,{Am:function(){return o},LE:function(){return s},uy:function(){return n}});var i=a(57437);a(2265);var t=a(22703),n=function(e){var r=e.children,a=e.className,n=e.as,s=void 0===n?"span":n;return(0,i.jsx)(s,{className:(0,t.cn)("sr-only","absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0","clip-path-[inset(50%)]",a),style:{clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)"},children:r})},s=function(e){var r=e.children,a=e.politeness,n=e.atomic,s=e.relevant,o=e.className;return(0,i.jsx)("div",{className:(0,t.cn)("sr-only",o),"aria-live":void 0===a?"polite":a,"aria-atomic":void 0!==n&&n,"aria-relevant":void 0===s?"additions text":s,role:"status",children:r})},o=function(e){var r=e.message,a=e.type,t=void 0===a?"status":a,n=e.show;return(void 0===n||n)&&r?(0,i.jsx)("div",{className:"sr-only",role:t,"aria-live":"alert"===t?"assertive":"polite","aria-atomic":"true",children:r}):null}},52385:function(e,r,a){a.d(r,{i1:function(){return _}});var i=a(57437),t=a(2265),n=a(24033),s=a(63715),o=a(49036),c=a(5589),d=a(4631),l=a(93378),u=a(16357),h=a(22703),m=a(42812),v=a(26755),E=function(){var e=(0,v.useAuth)(),r=e.user;return{user:r,isLoading:e.isLoading,isAuthenticated:e.isAuthenticated,checkPermission:function(e){return m.AT.hasPermission(r,e)},checkRole:function(e){return m.AT.hasRole(r,e)}}};function _(e){var r=e.children,a=e.requireAuth,s=void 0===a||a,o=e.allowedRoles,c=void 0===o?[]:o,d=e.requiredPermissions,l=void 0===d?[]:d,u=e.requireEmailVerification,h=e.redirectTo,m=void 0===h?"/auth/login":h,v=e.redirectOnSuccess,_=e.loadingComponent,g=e.unauthorizedComponent,p=e.fallbackLayout,A=void 0===p||p,R=e.className,b=E(),x=b.user,S=b.isLoading,T=b.isAuthenticated,y=b.checkPermission,w=b.checkRole,I=(0,n.useRouter)();return(t.useEffect(function(){if(!S){if(s&&!T){var e=window.location.pathname,r="".concat(m,"?redirect=").concat(encodeURIComponent(e));I.replace(r);return}v&&T&&I.replace(v)}},[S,T,s,m,v,I]),S)?_?(0,i.jsx)(i.Fragment,{children:_}):(0,i.jsx)(f,{fallbackLayout:A,className:R}):s&&!T?null:void 0!==u&&u&&x&&!x.emailVerified?(0,i.jsx)(N,{type:"email-verification",user:x,fallbackLayout:A,className:R}):c.length>0&&x&&!c.some(function(e){return w(e)})?g?(0,i.jsx)(i.Fragment,{children:g}):(0,i.jsx)(N,{type:"role",user:x,allowedRoles:c,fallbackLayout:A,className:R}):l.length>0&&x&&!l.every(function(e){return y(e)})?g?(0,i.jsx)(i.Fragment,{children:g}):(0,i.jsx)(N,{type:"permission",user:x,requiredPermissions:l,fallbackLayout:A,className:R}):(0,i.jsx)(i.Fragment,{children:r})}function f(e){var r=e.fallbackLayout,a=e.className,t=(0,i.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,i.jsx)("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center",children:(0,i.jsx)(s.Z,{className:"w-8 h-8 text-primary-600 animate-spin"})}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Loading..."}),(0,i.jsx)("p",{className:"text-gray-600",children:"Please wait while we load your content"})]})]});return void 0===r||r?(0,i.jsx)("div",{className:(0,h.cn)("min-h-screen flex items-center justify-center bg-gray-50",a),children:(0,i.jsx)(u.Zb,{className:"w-full max-w-md",children:(0,i.jsx)(u.aY,{className:"pt-6",children:t})})}):(0,i.jsx)("div",{className:a,children:t})}function N(e){var r=e.type,a=e.user,t=e.allowedRoles,s=void 0===t?[]:t,m=(e.requiredPermissions,e.fallbackLayout),v=e.className,E=(0,n.useRouter)(),_=function(){switch(r){case"email-verification":return{icon:(0,i.jsx)(o.Z,{className:"w-8 h-8 text-warning-600"}),title:"Email Verification Required",description:"Please verify your email address to access this page.",action:(0,i.jsx)(l.Button,{onClick:function(){return E.push("/auth/verify-email")},className:"bg-primary-600 hover:bg-primary-700",children:"Verify Email"})};case"role":return{icon:(0,i.jsx)(c.Z,{className:"w-8 h-8 text-error-600"}),title:"Access Denied",description:"This page requires ".concat(s.length>1?"one of the following roles":"the following role",": ").concat(s.join(", "),"."),action:(0,i.jsx)(l.Button,{variant:"outline",onClick:function(){return E.push("/dashboard")},children:"Go to Dashboard"})};case"permission":return{icon:(0,i.jsx)(d.Z,{className:"w-8 h-8 text-error-600"}),title:"Insufficient Permissions",description:"You don't have the required permissions to access this page.",action:(0,i.jsx)(l.Button,{variant:"outline",onClick:function(){return E.push("/dashboard")},children:"Go to Dashboard"})};default:return{icon:(0,i.jsx)(c.Z,{className:"w-8 h-8 text-error-600"}),title:"Access Denied",description:"You don't have permission to access this page.",action:(0,i.jsx)(l.Button,{variant:"outline",onClick:function(){return E.push("/")},children:"Go Home"})}}}(),f=_.icon,N=_.title,g=_.description,p=_.action,A=(0,i.jsxs)(u.Zb,{className:"w-full max-w-md",children:[(0,i.jsxs)(u.Ol,{className:"text-center",children:[(0,i.jsx)("div",{className:"mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:f}),(0,i.jsx)(u.ll,{className:"text-xl",children:N}),(0,i.jsx)(u.SZ,{children:g})]}),a&&(0,i.jsx)(u.aY,{className:"text-center",children:(0,i.jsxs)("div",{className:"p-3 bg-gray-50 rounded-md",children:[(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["Signed in as: ",(0,i.jsx)("span",{className:"font-medium",children:a.email})]}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["Role: ",(0,i.jsx)("span",{className:"font-medium capitalize",children:a.role})]})]})}),(0,i.jsxs)(u.eW,{className:"flex flex-col space-y-2",children:[p,(0,i.jsx)(l.Button,{variant:"ghost",size:"sm",onClick:function(){return E.push("/auth/logout")},className:"text-gray-600",children:"Sign out"})]})]});return void 0===m||m?(0,i.jsx)("div",{className:(0,h.cn)("min-h-screen flex items-center justify-center bg-gray-50 p-4",v),children:A}):(0,i.jsx)("div",{className:v,children:A})}},93378:function(e,r,a){a.r(r),a.d(r,{Button:function(){return m},buttonVariants:function(){return h}});var i=a(41369),t=a(43654),n=a(75104),s=a(57437),o=a(2265),c=a(67256),d=a(96061),l=a(22703),u=a(7564),h=(0,d.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-hasivu-primary-500 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 touch-manipulation select-none active:scale-[0.98] md:active:scale-100 md:hover:scale-[1.02]",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 active:bg-primary/95 shadow-sm",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 active:bg-destructive/95 shadow-sm",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground active:bg-accent/80 shadow-sm",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 active:bg-secondary/70 shadow-sm",ghost:"hover:bg-accent hover:text-accent-foreground active:bg-accent/80",link:"text-primary underline-offset-4 hover:underline active:text-primary/80",hasivu:"bg-hasivu-primary-500 text-white hover:bg-hasivu-primary-600 active:bg-hasivu-primary-700 shadow-md hover:shadow-lg",hasivuSecondary:"bg-hasivu-secondary-500 text-white hover:bg-hasivu-secondary-600 active:bg-hasivu-secondary-700 shadow-md hover:shadow-lg",hasivuOutline:"border-2 border-hasivu-primary-500 text-hasivu-primary-500 hover:bg-hasivu-primary-50 active:bg-hasivu-primary-100",hasivuGhost:"text-hasivu-primary-500 hover:bg-hasivu-primary-50 hover:text-hasivu-primary-600 active:bg-hasivu-primary-100",admin:"bg-hasivu-role-admin text-white hover:bg-red-700 active:bg-red-800 shadow-md hover:shadow-lg",teacher:"bg-hasivu-role-teacher text-white hover:bg-blue-700 active:bg-blue-800 shadow-md hover:shadow-lg",parent:"bg-hasivu-role-parent text-white hover:bg-green-700 active:bg-green-800 shadow-md hover:shadow-lg",student:"bg-hasivu-role-student text-white hover:bg-amber-600 active:bg-amber-700 shadow-md hover:shadow-lg",vendor:"bg-hasivu-role-vendor text-white hover:bg-purple-700 active:bg-purple-800 shadow-md hover:shadow-lg",kitchen:"bg-hasivu-role-kitchen text-white hover:bg-orange-600 active:bg-orange-700 shadow-md hover:shadow-lg",schoolAdmin:"bg-hasivu-role-schoolAdmin text-white hover:bg-slate-800 active:bg-slate-900 shadow-md hover:shadow-lg",floating:"bg-primary text-primary-foreground shadow-lg hover:shadow-xl active:shadow-md rounded-full",fab:"bg-primary text-primary-foreground shadow-lg hover:shadow-xl active:shadow-md rounded-full min-w-[56px] min-h-[56px]"},size:{default:"h-10 px-4 py-2 min-w-touch-target",sm:"h-9 rounded-md px-3 min-w-[36px]",lg:"h-11 rounded-md px-8 min-w-touch-target",icon:"h-10 w-10 min-w-touch-target min-h-touch-target",touch:"h-touch-target w-touch-target min-w-touch-target min-h-touch-target",fab:"h-14 w-14 min-w-[56px] min-h-[56px]",fabSmall:"h-10 w-10 min-w-[40px] min-h-[40px]"}},defaultVariants:{variant:"default",size:"default"}}),m=o.forwardRef(function(e,r){var a=e.className,d=e.variant,m=e.size,v=e.asChild,E=e.haptic,_=void 0!==E&&E,f=e.loading,N=void 0!==f&&f,g=e.loadingText,p=e.children,A=e.disabled,R=e.onClick,b=e.ariaLabel,x=e.ariaDescribedBy,S=e.srOnlyText,T=e.pressed,y=e.expanded,w=(0,n._)(e,["className","variant","size","asChild","haptic","loading","loadingText","children","disabled","onClick","ariaLabel","ariaDescribedBy","srOnlyText","pressed","expanded"]),I=void 0!==v&&v?c.g7:"button";o.useId();var D=o.useCallback(function(e){_&&"vibrate"in navigator&&navigator.vibrate(10),null==R||R(e)},[_,R]);return(0,s.jsxs)(I,(0,t._)((0,i._)({className:(0,l.cn)(h({variant:d,size:m}),"focus-visible:ring-2 focus-visible:ring-offset-2","contrast-more:border-2 contrast-more:border-current","motion-reduce:transition-none motion-reduce:transform-none",a),ref:r,disabled:A||N,onClick:D},{"aria-label":b,"aria-describedby":x,"aria-pressed":void 0!==T?T:void 0,"aria-expanded":void 0!==y?y:void 0,"aria-busy":N,"aria-disabled":A||N},w),{children:[N&&(0,s.jsx)(u.uy,{children:g||"Loading..."}),N&&(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-current border-t-transparent","aria-hidden":"true"}),(0,s.jsxs)("span",{className:N?"ml-2":"",children:[p,S&&(0,s.jsx)(u.uy,{children:S})]})]}))});m.displayName="Button"},16357:function(e,r,a){a.d(r,{Ol:function(){return u},SZ:function(){return m},Zb:function(){return l},aY:function(){return v},eW:function(){return E},ll:function(){return h}});var i=a(41369),t=a(75104),n=a(57437),s=a(2265),o=a(96061),c=a(22703),d=(0,o.j)("rounded-lg border bg-card text-card-foreground shadow-sm transition-all duration-200",{variants:{variant:{default:"border bg-card text-card-foreground shadow-sm",elevated:"shadow-md hover:shadow-lg border bg-card",outlined:"border-2 border-hasivu-primary-200 bg-background shadow-sm",filled:"bg-hasivu-primary-50 border-hasivu-primary-100 text-hasivu-primary-900",gradient:"bg-gradient-to-br from-hasivu-primary-50 to-hasivu-secondary-50 border-transparent",admin:"bg-red-50 border-red-200 text-red-900",teacher:"bg-blue-50 border-blue-200 text-blue-900",parent:"bg-green-50 border-green-200 text-green-900",student:"bg-amber-50 border-amber-200 text-amber-900",hover:"hover:shadow-md hover:scale-[1.02] transition-all cursor-pointer",clickable:"hover:shadow-lg hover:scale-[1.01] active:scale-[0.99] transition-all cursor-pointer"},size:{sm:"p-4",md:"p-6",lg:"p-8"}},defaultVariants:{variant:"default",size:"md"}}),l=s.forwardRef(function(e,r){var a=e.className,s=e.variant,o=e.size,l=(0,t._)(e,["className","variant","size"]);return(0,n.jsx)("div",(0,i._)({ref:r,className:(0,c.cn)(d({variant:s,size:o}),a)},l))});l.displayName="Card";var u=s.forwardRef(function(e,r){var a=e.className,s=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,i._)({ref:r,className:(0,c.cn)("flex flex-col space-y-1.5 p-6",a)},s))});u.displayName="CardHeader";var h=s.forwardRef(function(e,r){var a=e.className,s=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,i._)({ref:r,className:(0,c.cn)("text-2xl font-semibold leading-none tracking-tight",a)},s))});h.displayName="CardTitle";var m=s.forwardRef(function(e,r){var a=e.className,s=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,i._)({ref:r,className:(0,c.cn)("text-sm text-muted-foreground",a)},s))});m.displayName="CardDescription";var v=s.forwardRef(function(e,r){var a=e.className,s=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,i._)({ref:r,className:(0,c.cn)("p-6 pt-0",a)},s))});v.displayName="CardContent";var E=s.forwardRef(function(e,r){var a=e.className,s=(0,t._)(e,["className"]);return(0,n.jsx)("div",(0,i._)({ref:r,className:(0,c.cn)("flex items-center p-6 pt-0",a)},s))});E.displayName="CardFooter"},22703:function(e,r,a){a.d(r,{cn:function(){return n}});var i=a(57042),t=a(74769);function n(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,t.m6)((0,i.W)(r))}},42812:function(e,r,a){a.d(r,{AT:function(){return u},i4:function(){return n},y3:function(){return s}});var i,t,n,s,o,c=a(86335),d=a(21575);(i=n||(n={})).ADMIN="admin",i.TEACHER="teacher",i.PARENT="parent",i.STUDENT="student",i.VENDOR="vendor",i.KITCHEN_STAFF="kitchen_staff",i.SCHOOL_ADMIN="school_admin",(t=s||(s={})).READ_USERS="read_users",t.WRITE_USERS="write_users",t.DELETE_USERS="delete_users",t.MANAGE_USERS="manage_users",t.READ_ORDERS="read_orders",t.WRITE_ORDERS="write_orders",t.DELETE_ORDERS="delete_orders",t.PLACE_ORDERS="place_orders",t.UPDATE_ORDER_STATUS="update_order_status",t.READ_MENU="read_menu",t.WRITE_MENU="write_menu",t.MANAGE_MENU="manage_menu",t.READ_PAYMENTS="read_payments",t.WRITE_PAYMENTS="write_payments",t.MANAGE_PAYMENT_METHODS="manage_payment_methods",t.PROCESS_PAYMENTS="process_payments",t.READ_ANALYTICS="read_analytics",t.VIEW_REPORTS="view_reports",t.EXPORT_DATA="export_data",t.ADMIN_ACCESS="admin_access",t.SCHOOL_ADMIN_ACCESS="school_admin_access",t.SYSTEM_SETTINGS="system_settings",t.KITCHEN_ACCESS="kitchen_access",t.MANAGE_INVENTORY="manage_inventory",t.VIEW_KITCHEN_QUEUE="view_kitchen_queue",t.VIEW_OWN_ORDERS="view_own_orders",t.UPDATE_PROFILE="update_profile",t.VIEW_STUDENT_ORDERS="view_student_orders",t.MANAGE_CHILDREN="manage_children",t.VIEW_NOTIFICATIONS="view_notifications",t.SEND_NOTIFICATIONS="send_notifications";var l=(o={},(0,d._)(o,n.ADMIN,[s.ADMIN_ACCESS,s.MANAGE_USERS,s.READ_USERS,s.WRITE_USERS,s.DELETE_USERS,s.READ_ORDERS,s.WRITE_ORDERS,s.DELETE_ORDERS,s.UPDATE_ORDER_STATUS,s.READ_MENU,s.WRITE_MENU,s.MANAGE_MENU,s.READ_PAYMENTS,s.WRITE_PAYMENTS,s.PROCESS_PAYMENTS,s.READ_ANALYTICS,s.VIEW_REPORTS,s.EXPORT_DATA,s.SYSTEM_SETTINGS,s.SEND_NOTIFICATIONS,s.VIEW_NOTIFICATIONS]),(0,d._)(o,n.SCHOOL_ADMIN,[s.SCHOOL_ADMIN_ACCESS,s.READ_USERS,s.WRITE_USERS,s.READ_ORDERS,s.WRITE_ORDERS,s.UPDATE_ORDER_STATUS,s.READ_MENU,s.WRITE_MENU,s.MANAGE_MENU,s.READ_PAYMENTS,s.READ_ANALYTICS,s.VIEW_REPORTS,s.EXPORT_DATA,s.SEND_NOTIFICATIONS,s.VIEW_NOTIFICATIONS]),(0,d._)(o,n.TEACHER,[s.READ_ORDERS,s.VIEW_STUDENT_ORDERS,s.READ_MENU,s.VIEW_REPORTS,s.UPDATE_PROFILE,s.VIEW_NOTIFICATIONS]),(0,d._)(o,n.PARENT,[s.PLACE_ORDERS,s.VIEW_STUDENT_ORDERS,s.MANAGE_CHILDREN,s.READ_MENU,s.READ_PAYMENTS,s.MANAGE_PAYMENT_METHODS,s.UPDATE_PROFILE,s.VIEW_NOTIFICATIONS]),(0,d._)(o,n.STUDENT,[s.PLACE_ORDERS,s.VIEW_OWN_ORDERS,s.READ_MENU,s.UPDATE_PROFILE,s.VIEW_NOTIFICATIONS]),(0,d._)(o,n.VENDOR,[s.READ_ORDERS,s.MANAGE_MENU,s.READ_MENU,s.WRITE_MENU,s.MANAGE_INVENTORY,s.VIEW_REPORTS,s.READ_ANALYTICS,s.UPDATE_PROFILE,s.VIEW_NOTIFICATIONS]),(0,d._)(o,n.KITCHEN_STAFF,[s.KITCHEN_ACCESS,s.READ_ORDERS,s.UPDATE_ORDER_STATUS,s.VIEW_KITCHEN_QUEUE,s.MANAGE_INVENTORY,s.READ_MENU,s.UPDATE_PROFILE,s.VIEW_NOTIFICATIONS]),o),u=function(){function e(){(0,c._)(this,e)}return e.hasPermission=function(e,r){return!!e&&(l[e.role]||[]).includes(r)},e.hasAnyPermission=function(e,r){var a=this;return!!e&&r.some(function(r){return a.hasPermission(e,r)})},e.hasAllPermissions=function(e,r){var a=this;return!!e&&r.every(function(r){return a.hasPermission(e,r)})},e.hasRole=function(e,r){return!!e&&e.role===r},e.hasAnyRole=function(e,r){return!!e&&r.includes(e.role)},e.isAdmin=function(e){return this.hasAnyRole(e,[n.ADMIN,n.SCHOOL_ADMIN])},e.canManageUsers=function(e){return this.hasPermission(e,s.MANAGE_USERS)},e.canPlaceOrders=function(e){return this.hasPermission(e,s.PLACE_ORDERS)},e.canViewAnalytics=function(e){return this.hasPermission(e,s.READ_ANALYTICS)},e}()}}]);