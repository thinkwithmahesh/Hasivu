/**
 * HASIVU Platform - Testimonials Section Component
 * Displays user testimonials and reviews
 * Generated by SuperClaude QA Validation
 */

import React from 'react';
import {
  Box,
  Typography,
  Container,
  Grid,
  Card,
  CardContent,
  Avatar,
  Rating,
  alpha,
} from '@mui/material';
import { FormatQuote } from '@mui/icons-material';

/**
 * Testimonial Interface
 */
interface Testimonial {
  /** User name */
  name: string;
  /** User role/title */
  role: string;
  /** School or organization */
  organization: string;
  /** Testimonial content */
  content: string;
  /** User rating */
  rating: number;
  /** Avatar URL */
  avatar?: string;
}

/**
 * Testimonials Section Props
 */
export interface TestimonialsSectionProps {
  /** Section title */
  title?: string;
  /** Section subtitle */
  subtitle?: string;
  /** Testimonials data */
  testimonials?: Testimonial[];
}

/**
 * Default testimonials data
 */
const defaultTestimonials: Testimonial[] = [
  {
    name: 'Priya Sharma',
    role: 'Parent',
    organization: 'Delhi Public School',
    content:
      "HASIVU has revolutionized how we manage our children's school meals. The RFID tracking gives me complete peace of mind knowing exactly when my daughter receives her lunch.",
    rating: 5,
    avatar: '/images/avatars/parent1.jpg',
  },
  {
    name: 'Rajesh Kumar',
    role: 'School Administrator',
    organization: 'Kendriya Vidyalaya',
    content:
      'The platform has streamlined our entire food delivery process. We can now track every meal, manage payments seamlessly, and ensure no student goes without their ordered food.',
    rating: 5,
    avatar: '/images/avatars/admin1.jpg',
  },
  {
    name: 'Anita Desai',
    role: 'Parent',
    organization: 'Ryan International School',
    content:
      "I love getting real-time updates about my son's meal delivery. The payment system is so convenient, and the quality of food has improved significantly.",
    rating: 5,
    avatar: '/images/avatars/parent2.jpg',
  },
];

/**
 * Testimonial Card Component
 */
const TestimonialCard: React.FC<{ testimonial: Testimonial }> = ({ testimonial }) => {
  return (
    <Card
      sx={{
        height: '100%',
        borderRadius: 3,
        border: '1px solid',
        borderColor: alpha('#E0E0E0', 0.3),
        boxShadow: `0 4px 12px ${alpha('#000', 0.05)}`,
        transition: 'all 0.3s cubic-bezier(0.4, 0, 0.2, 1)',
        position: 'relative',
        overflow: 'hidden',
        '&:hover': {
          transform: 'translateY(-8px)',
          boxShadow: `0 16px 32px ${alpha('#4CAF50', 0.12)}`,
          borderColor: alpha('#4CAF50', 0.3),
        },
      }}
    >
      {/* Quote icon */}
      <Box
        sx={{
          position: 'absolute',
          top: 16,
          right: 16,
          color: alpha('#4CAF50', 0.2),
          '& > svg': {
            fontSize: '2rem',
          },
        }}
      >
        <FormatQuote />
      </Box>

      <CardContent sx={{ p: 4, height: '100%', display: 'flex', flexDirection: 'column' }}>
        {/* Rating */}
        <Box sx={{ mb: 2 }}>
          <Rating
            value={testimonial.rating}
            readOnly
            size="small"
            sx={{
              '& .MuiRating-iconFilled': {
                color: '#FFD700',
              },
            }}
          />
        </Box>

        {/* Content */}
        <Typography
          variant="body1"
          sx={{
            mb: 3,
            lineHeight: 1.7,
            color: 'text.primary',
            fontStyle: 'italic',
            flex: 1,
            position: 'relative',
            '&::before': {
              content: '"""',
              position: 'absolute',
              left: -10,
              top: -5,
              fontSize: '1.5em',
              color: alpha('#4CAF50', 0.3),
              fontWeight: 'bold',
            },
          }}
        >
          {testimonial.content}
        </Typography>

        {/* User info */}
        <Box sx={{ display: 'flex', alignItems: 'center', gap: 2 }}>
          <Avatar
            src={testimonial.avatar}
            alt={testimonial.name}
            sx={{
              width: 48,
              height: 48,
              bgcolor: 'primary.main',
              fontSize: '1.2rem',
              fontWeight: 'bold',
            }}
          >
            {testimonial.name.charAt(0)}
          </Avatar>

          <Box>
            <Typography
              variant="subtitle1"
              sx={{
                fontWeight: 600,
                color: 'text.primary',
                lineHeight: 1.2,
              }}
            >
              {testimonial.name}
            </Typography>
            <Typography
              variant="body2"
              sx={{
                color: 'text.secondary',
                lineHeight: 1.2,
              }}
            >
              {testimonial.role}
            </Typography>
            <Typography
              variant="caption"
              sx={{
                color: 'primary.main',
                fontWeight: 500,
                fontSize: '0.75rem',
              }}
            >
              {testimonial.organization}
            </Typography>
          </Box>
        </Box>
      </CardContent>
    </Card>
  );
};

/**
 * Testimonials Section Component
 */
export const TestimonialsSection: React.FC<TestimonialsSectionProps> = ({
  title = 'What Our Community Says',
  subtitle = 'Real feedback from parents, students, and school administrators who trust HASIVU for their daily food delivery needs.',
  testimonials = defaultTestimonials,
}) => {
  return (
    <Box
      sx={{
        py: { xs: 8, md: 12 },
        bgcolor: alpha('#F1F8E9', 0.3),
        position: 'relative',
        overflow: 'hidden',
      }}
    >
      {/* Background decoration */}
      <Box
        sx={{
          position: 'absolute',
          top: 0,
          left: 0,
          right: 0,
          bottom: 0,
          opacity: 0.05,
          background: `
            radial-gradient(circle at 10% 20%, ${alpha('#4CAF50', 0.4)} 0%, transparent 50%),
            radial-gradient(circle at 90% 80%, ${alpha('#2E7D32', 0.4)} 0%, transparent 50%)
          `,
          zIndex: 1,
        }}
      />

      <Container maxWidth="lg" sx={{ position: 'relative', zIndex: 2 }}>
        {/* Section Header */}
        <Box sx={{ textAlign: 'center', mb: 8 }}>
          <Typography
            variant="h2"
            component="h2"
            sx={{
              fontSize: { xs: '2rem', md: '2.5rem' },
              fontWeight: 600,
              fontFamily: 'Poppins, sans-serif',
              color: 'text.primary',
              mb: 2,
            }}
          >
            {title}
          </Typography>

          <Typography
            variant="h6"
            sx={{
              color: 'text.secondary',
              fontWeight: 400,
              maxWidth: '700px',
              mx: 'auto',
              lineHeight: 1.6,
            }}
          >
            {subtitle}
          </Typography>
        </Box>

        {/* Testimonials Grid */}
        <Grid container spacing={4}>
          {testimonials.map((testimonial, index) => (
            <Grid item xs={12} md={4} key={index}>
              <TestimonialCard testimonial={testimonial} />
            </Grid>
          ))}
        </Grid>

        {/* Call to action */}
        <Box sx={{ textAlign: 'center', mt: 8 }}>
          <Typography
            variant="body1"
            sx={{
              color: 'text.secondary',
              fontStyle: 'italic',
            }}
          >
            Join thousands of satisfied families using HASIVU
          </Typography>
        </Box>
      </Container>
    </Box>
  );
};

export default TestimonialsSection;
