# HASIVU Platform - Production Environment Configuration
# DO NOT COMMIT THIS FILE TO VERSION CONTROL
# Use AWS Secrets Manager and Parameter Store for sensitive values

# =====================================================
# APPLICATION ENVIRONMENT
# =====================================================
NODE_ENV=production
LOG_LEVEL=info
API_VERSION=v1

# =====================================================
# AWS CONFIGURATION
# =====================================================
AWS_REGION=ap-south-1
AWS_ACCOUNT_ID=${AWS_ACCOUNT_ID}

# =====================================================
# DATABASE CONFIGURATION (Use RDS Proxy in production)
# =====================================================
DATABASE_URL=${ssm:/hasivu-platform/production/database/url}
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=20
DATABASE_CONNECTION_TIMEOUT=30000
DATABASE_IDLE_TIMEOUT=300000

# =====================================================
# REDIS CONFIGURATION
# =====================================================
REDIS_URL=${ssm:/hasivu-platform/production/redis/url}
REDIS_POOL_MIN=1
REDIS_POOL_MAX=10
REDIS_CONNECTION_TIMEOUT=5000
REDIS_COMMAND_TIMEOUT=3000
REDIS_TTL_DEFAULT=3600

# =====================================================
# COGNITO CONFIGURATION
# =====================================================
COGNITO_USER_POOL_ID=${cf:hasivu-infrastructure-production.CognitoUserPoolId}
COGNITO_CLIENT_ID=${cf:hasivu-infrastructure-production.CognitoClientId}
COGNITO_REGION=${AWS_REGION}

# =====================================================
# S3 CONFIGURATION
# =====================================================
S3_BUCKET_NAME=${cf:hasivu-infrastructure-production.S3BucketName}
S3_REGION=${AWS_REGION}
S3_MAX_FILE_SIZE=10485760
S3_ALLOWED_MIME_TYPES=image/jpeg,image/png,image/gif,image/webp,application/pdf,text/csv
S3_SIGNED_URL_EXPIRY=3600

# =====================================================
# SECRETS MANAGER CONFIGURATION
# =====================================================
RAZORPAY_SECRET_ARN=${cf:hasivu-infrastructure-production.RazorpaySecretArn}
WHATSAPP_SECRET_ARN=${cf:hasivu-infrastructure-production.WhatsAppSecretArn}
JWT_SECRET_ARN=${cf:hasivu-infrastructure-production.JwtSecretArn}

# =====================================================
# EXTERNAL SERVICE URLS
# =====================================================
FRONTEND_URL=https://app.hasivu.com
ADMIN_URL=https://admin.hasivu.com
API_URL=https://api.hasivu.com

# =====================================================
# CORS CONFIGURATION
# =====================================================
CORS_ALLOWED_ORIGINS=https://app.hasivu.com,https://admin.hasivu.com,https://www.hasivu.com
CORS_ALLOWED_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With,X-Api-Key
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400

# =====================================================
# RATE LIMITING
# =====================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_FAILED_REQUESTS=false
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false

# =====================================================
# SECURITY CONFIGURATION
# =====================================================
JWT_EXPIRY=1h
JWT_REFRESH_EXPIRY=30d
PASSWORD_SALT_ROUNDS=12
SESSION_TIMEOUT=3600
MAX_LOGIN_ATTEMPTS=5
ACCOUNT_LOCKOUT_DURATION=900

# =====================================================
# EMAIL CONFIGURATION (SES)
# =====================================================
EMAIL_FROM=noreply@hasivu.com
EMAIL_FROM_NAME=HASIVU Platform
EMAIL_REGION=${AWS_REGION}
EMAIL_TEMPLATE_BUCKET=${cf:hasivu-infrastructure-production.S3BucketName}

# =====================================================
# NOTIFICATION CONFIGURATION
# =====================================================
NOTIFICATION_BATCH_SIZE=100
NOTIFICATION_RETRY_ATTEMPTS=3
NOTIFICATION_RETRY_DELAY=5000
WHATSAPP_WEBHOOK_VERIFY_TOKEN=${ssm:/hasivu-platform/production/whatsapp/webhook-token}

# =====================================================
# PAYMENT CONFIGURATION
# =====================================================
RAZORPAY_WEBHOOK_SECRET=${ssm:/hasivu-platform/production/razorpay/webhook-secret}
PAYMENT_ORDER_EXPIRY=900
PAYMENT_CURRENCY=INR
PAYMENT_MIN_AMOUNT=100

# =====================================================
# MONITORING AND OBSERVABILITY
# =====================================================
X_RAY_TRACING=true
POWERTOOLS_SERVICE_NAME=hasivu-platform-api
POWERTOOLS_METRICS_NAMESPACE=HASIVU/Platform
POWERTOOLS_LOGGER_LOG_EVENT=false
POWERTOOLS_LOGGER_SAMPLE_RATE=0.1

# =====================================================
# PERFORMANCE CONFIGURATION
# =====================================================
MAX_CONCURRENT_CONNECTIONS=1000
LAMBDA_MEMORY_SIZE=1024
LAMBDA_TIMEOUT=30
LAMBDA_RESERVED_CONCURRENCY=100

# =====================================================
# FEATURE FLAGS
# =====================================================
FEATURE_FLAG_PAYMENT_INTEGRATION=true
FEATURE_FLAG_WHATSAPP_NOTIFICATIONS=true
FEATURE_FLAG_RFID_VERIFICATION=true
FEATURE_FLAG_ANALYTICS_DASHBOARD=true
FEATURE_FLAG_BULK_OPERATIONS=true
FEATURE_FLAG_REAL_TIME_UPDATES=true

# =====================================================
# BUSINESS CONFIGURATION
# =====================================================
SCHOOL_TIMEZONE=Asia/Kolkata
DEFAULT_LANGUAGE=en
SUPPORTED_LANGUAGES=en,hi,kn
BUSINESS_HOURS_START=06:00
BUSINESS_HOURS_END=18:00
MAX_CHILDREN_PER_PARENT=10
MAX_ORDERS_PER_DAY=5
ORDER_CANCELLATION_WINDOW=1800

# =====================================================
# ANALYTICS CONFIGURATION
# =====================================================
ANALYTICS_ENABLED=true
ANALYTICS_BATCH_SIZE=1000
ANALYTICS_FLUSH_INTERVAL=300000
ANALYTICS_RETENTION_DAYS=90

# =====================================================
# BACKUP CONFIGURATION
# =====================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_BUCKET=${S3_BUCKET_NAME}/backups

# =====================================================
# HEALTH CHECK CONFIGURATION
# =====================================================
HEALTH_CHECK_TIMEOUT=5000
HEALTH_CHECK_DATABASE=true
HEALTH_CHECK_REDIS=true
HEALTH_CHECK_S3=true
HEALTH_CHECK_EXTERNAL_SERVICES=true

# =====================================================
# DEBUGGING (Disabled in production)
# =====================================================
DEBUG=false
VERBOSE_LOGGING=false
SQL_LOGGING=false
REDIS_LOGGING=false